{"format_version":"1.2","terraform_version":"1.6.1","planned_values":{"root_module":{}},"configuration":{"provider_config":{"archive":{"name":"archive","full_name":"registry.terraform.io/hashicorp/archive"},"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","expressions":{"region":{"constant_value":"ap-southeast-1"}}}},"root_module":{"outputs":{"sqs_url":{"expression":{"references":["aws_sqs_queue.some_queue.id","aws_sqs_queue.some_queue"]}}},"resources":[{"address":"aws_iam_policy.example_lambda","mode":"managed","type":"aws_iam_policy","name":"example_lambda","provider_config_key":"aws","expressions":{"policy":{"references":["data.aws_iam_policy_document.example_lambda.json","data.aws_iam_policy_document.example_lambda"]}},"schema_version":0},{"address":"aws_iam_policy.example_lambda2","mode":"managed","type":"aws_iam_policy","name":"example_lambda2","provider_config_key":"aws","expressions":{"policy":{"references":["data.aws_iam_policy_document.example_lambda.json","data.aws_iam_policy_document.example_lambda"]}},"schema_version":0},{"address":"aws_iam_role.example_lambda","mode":"managed","type":"aws_iam_role","name":"example_lambda","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"}},"schema_version":0},{"address":"aws_iam_role.example_lambda2","mode":"managed","type":"aws_iam_role","name":"example_lambda2","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.example_lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"example_lambda","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.example_lambda.arn","aws_iam_policy.example_lambda"]},"role":{"references":["aws_iam_role.example_lambda.name","aws_iam_role.example_lambda"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.example_lambda2","mode":"managed","type":"aws_iam_role_policy_attachment","name":"example_lambda2","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.example_lambda.arn","aws_iam_policy.example_lambda"]},"role":{"references":["aws_iam_role.example_lambda.name","aws_iam_role.example_lambda"]}},"schema_version":0},{"address":"aws_lambda_event_source_mapping.event_source_mapping","mode":"managed","type":"aws_lambda_event_source_mapping","name":"event_source_mapping","provider_config_key":"aws","expressions":{"batch_size":{"constant_value":1},"enabled":{"constant_value":true},"event_source_arn":{"references":["aws_sqs_queue.some_queue.arn","aws_sqs_queue.some_queue"]},"function_name":{"references":["aws_lambda_function.example_lambda.arn","aws_lambda_function.example_lambda"]}},"schema_version":0},{"address":"aws_lambda_event_source_mapping.event_source_mapping2","mode":"managed","type":"aws_lambda_event_source_mapping","name":"event_source_mapping2","provider_config_key":"aws","expressions":{"batch_size":{"constant_value":1},"enabled":{"constant_value":true},"event_source_arn":{"references":["aws_sqs_queue.some_queue.arn","aws_sqs_queue.some_queue"]},"function_name":{"references":["aws_lambda_function.example_lambda2.arn","aws_lambda_function.example_lambda2"]}},"schema_version":0},{"address":"aws_lambda_function.example_lambda","mode":"managed","type":"aws_lambda_function","name":"example_lambda","provider_config_key":"aws","expressions":{"filename":{"references":["data.archive_file.example_lambda.output_path","data.archive_file.example_lambda"]},"function_name":{"constant_value":"example_lambda"},"handler":{"constant_value":"example_lambda.handler"},"memory_size":{"constant_value":128},"role":{"references":["aws_iam_role.example_lambda.arn","aws_iam_role.example_lambda"]},"runtime":{"constant_value":"nodejs6.10"},"source_code_hash":{"references":["data.archive_file.example_lambda.output_base64sha256","data.archive_file.example_lambda"]},"timeout":{"constant_value":30}},"schema_version":0},{"address":"aws_lambda_function.example_lambda2","mode":"managed","type":"aws_lambda_function","name":"example_lambda2","provider_config_key":"aws","expressions":{"filename":{"references":["data.archive_file.example_lambda2.output_path","data.archive_file.example_lambda2"]},"function_name":{"constant_value":"example_lambda2"},"handler":{"constant_value":"example_lambda2.handler"},"memory_size":{"constant_value":128},"role":{"references":["aws_iam_role.example_lambda2.arn","aws_iam_role.example_lambda2"]},"runtime":{"constant_value":"nodejs6.10"},"source_code_hash":{"references":["data.archive_file.example_lambda2.output_base64sha256","data.archive_file.example_lambda2"]},"timeout":{"constant_value":30}},"schema_version":0},{"address":"aws_sqs_queue.some_queue","mode":"managed","type":"aws_sqs_queue","name":"some_queue","provider_config_key":"aws","expressions":{"name":{"constant_value":"SomeQueue"}},"schema_version":0},{"address":"data.archive_file.example_lambda","mode":"data","type":"archive_file","name":"example_lambda","provider_config_key":"archive","expressions":{"output_path":{"references":["path.module"]},"source_file":{"references":["path.module"]},"type":{"constant_value":"zip"}},"schema_version":0},{"address":"data.archive_file.example_lambda2","mode":"data","type":"archive_file","name":"example_lambda2","provider_config_key":"archive","expressions":{"output_path":{"references":["path.module"]},"source_file":{"references":["path.module"]},"type":{"constant_value":"zip"}},"schema_version":0},{"address":"data.aws_iam_policy_document.example_lambda","mode":"data","type":"aws_iam_policy_document","name":"example_lambda","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:ReceiveMessage"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:sqs:*"]},"sid":{"constant_value":"AllowSQSPermissions"}},{"actions":{"constant_value":["lambda:InvokeFunction"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:lambda:ap-southeast-1:*:function:*"]},"sid":{"constant_value":"AllowInvokingLambdas"}},{"actions":{"constant_value":["logs:CreateLogGroup"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:logs:ap-southeast-1:*:*"]},"sid":{"constant_value":"AllowCreatingLogGroups"}},{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:logs:ap-southeast-1:*:log-group:/aws/lambda/*:*"]},"sid":{"constant_value":"AllowWritingLogs"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.example_lambda2","mode":"data","type":"aws_iam_policy_document","name":"example_lambda2","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:ReceiveMessage"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:sqs:*"]},"sid":{"constant_value":"AllowSQSPermissions"}},{"actions":{"constant_value":["lambda:InvokeFunction"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:lambda:ap-southeast-1:*:function:*"]},"sid":{"constant_value":"AllowInvokingLambdas"}},{"actions":{"constant_value":["logs:CreateLogGroup"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:logs:ap-southeast-1:*:*"]},"sid":{"constant_value":"AllowCreatingLogGroups"}},{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:logs:ap-southeast-1:*:log-group:/aws/lambda/*:*"]},"sid":{"constant_value":"AllowWritingLogs"}}]},"schema_version":0}]}},"timestamp":"2023-10-16T18:45:26Z","errored":true}
