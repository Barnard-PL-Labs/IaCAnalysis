{
    "format_version": "1.2",
    "terraform_version": "1.6.1",
    "planned_values": {
        "outputs": {
            "sqs_url": {
                "sensitive": false
            }
        },
        "root_module": {
            "resources": [
                {
                    "address": "aws_iam_policy.example_lambda",
                    "mode": "managed",
                    "type": "aws_iam_policy",
                    "name": "example_lambda",
                    "provider_name": "registry.terraform.io/hashicorp/aws",
                    "schema_version": 0,
                    "values": {
                        "description": null,
                        "path": "/",
                        "policy": "{\"Statement\":[{\"Action\":[\"sqs:ReceiveMessage\",\"sqs:GetQueueAttributes\",\"sqs:DeleteMessage\",\"sqs:ChangeMessageVisibility\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:*\",\"Sid\":\"AllowSQSPermissions\"},{\"Action\":\"lambda:InvokeFunction\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:lambda:ap-southeast-1:*:function:*\",\"Sid\":\"AllowInvokingLambdas\"},{\"Action\":\"logs:CreateLogGroup\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:ap-southeast-1:*:*\",\"Sid\":\"AllowCreatingLogGroups\"},{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:ap-southeast-1:*:log-group:/aws/lambda/*:*\",\"Sid\":\"AllowWritingLogs\"}],\"Version\":\"2012-10-17\"}",
                        "tags": null
                    },
                    "sensitive_values": {
                        "tags_all": {}
                    }
                },
                {
                    "address": "aws_iam_role.example_lambda",
                    "mode": "managed",
                    "type": "aws_iam_role",
                    "name": "example_lambda",
                    "provider_name": "registry.terraform.io/hashicorp/aws",
                    "schema_version": 0,
                    "values": {
                        "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
                        "description": null,
                        "force_detach_policies": false,
                        "max_session_duration": 3600,
                        "path": "/",
                        "permissions_boundary": null,
                        "tags": null
                    },
                    "sensitive_values": {
                        "inline_policy": [],
                        "managed_policy_arns": [],
                        "tags_all": {}
                    }
                },
                {
                    "address": "aws_iam_role_policy_attachment.example_lambda",
                    "mode": "managed",
                    "type": "aws_iam_role_policy_attachment",
                    "name": "example_lambda",
                    "provider_name": "registry.terraform.io/hashicorp/aws",
                    "schema_version": 0,
                    "sensitive_values": {}
                },
                {
                    "address": "aws_sqs_queue.some_queue",
                    "mode": "managed",
                    "type": "aws_sqs_queue",
                    "name": "some_queue",
                    "provider_name": "registry.terraform.io/hashicorp/aws",
                    "schema_version": 0,
                    "values": {
                        "content_based_deduplication": false,
                        "delay_seconds": 0,
                        "fifo_queue": false,
                        "kms_master_key_id": null,
                        "max_message_size": 262144,
                        "message_retention_seconds": 345600,
                        "name": "SomeQueue",
                        "receive_wait_time_seconds": 0,
                        "tags": null,
                        "visibility_timeout_seconds": 30
                    },
                    "sensitive_values": {
                        "tags_all": {}
                    }
                }
            ]
        }
    },
    "resource_changes": [
        {
            "address": "aws_iam_policy.example_lambda",
            "mode": "managed",
            "type": "aws_iam_policy",
            "name": "example_lambda",
            "provider_name": "registry.terraform.io/hashicorp/aws",
            "change": {
                "actions": [
                    "create"
                ],
                "before": null,
                "after": {
                    "description": null,
                    "path": "/",
                    "policy": "{\"Statement\":[{\"Action\":[\"sqs:ReceiveMessage\",\"sqs:GetQueueAttributes\",\"sqs:DeleteMessage\",\"sqs:ChangeMessageVisibility\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:*\",\"Sid\":\"AllowSQSPermissions\"},{\"Action\":\"lambda:InvokeFunction\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:lambda:ap-southeast-1:*:function:*\",\"Sid\":\"AllowInvokingLambdas\"},{\"Action\":\"logs:CreateLogGroup\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:ap-southeast-1:*:*\",\"Sid\":\"AllowCreatingLogGroups\"},{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:ap-southeast-1:*:log-group:/aws/lambda/*:*\",\"Sid\":\"AllowWritingLogs\"}],\"Version\":\"2012-10-17\"}",
                    "tags": null
                },
                "after_unknown": {
                    "arn": true,
                    "id": true,
                    "name": true,
                    "name_prefix": true,
                    "policy_id": true,
                    "tags_all": true
                },
                "before_sensitive": false,
                "after_sensitive": {
                    "tags_all": {}
                }
            }
        },
        {
            "address": "aws_iam_role.example_lambda",
            "mode": "managed",
            "type": "aws_iam_role",
            "name": "example_lambda",
            "provider_name": "registry.terraform.io/hashicorp/aws",
            "change": {
                "actions": [
                    "create"
                ],
                "before": null,
                "after": {
                    "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
                    "description": null,
                    "force_detach_policies": false,
                    "max_session_duration": 3600,
                    "path": "/",
                    "permissions_boundary": null,
                    "tags": null
                },
                "after_unknown": {
                    "arn": true,
                    "create_date": true,
                    "id": true,
                    "inline_policy": true,
                    "managed_policy_arns": true,
                    "name": true,
                    "name_prefix": true,
                    "tags_all": true,
                    "unique_id": true
                },
                "before_sensitive": false,
                "after_sensitive": {
                    "inline_policy": [],
                    "managed_policy_arns": [],
                    "tags_all": {}
                }
            }
        },
        {
            "address": "aws_iam_role_policy_attachment.example_lambda",
            "mode": "managed",
            "type": "aws_iam_role_policy_attachment",
            "name": "example_lambda",
            "provider_name": "registry.terraform.io/hashicorp/aws",
            "change": {
                "actions": [
                    "create"
                ],
                "before": null,
                "after": {},
                "after_unknown": {
                    "id": true,
                    "policy_arn": true,
                    "role": true
                },
                "before_sensitive": false,
                "after_sensitive": {}
            }
        },
        {
            "address": "aws_sqs_queue.some_queue",
            "mode": "managed",
            "type": "aws_sqs_queue",
            "name": "some_queue",
            "provider_name": "registry.terraform.io/hashicorp/aws",
            "change": {
                "actions": [
                    "create"
                ],
                "before": null,
                "after": {
                    "content_based_deduplication": false,
                    "delay_seconds": 0,
                    "fifo_queue": false,
                    "kms_master_key_id": null,
                    "max_message_size": 262144,
                    "message_retention_seconds": 345600,
                    "name": "SomeQueue",
                    "receive_wait_time_seconds": 0,
                    "tags": null,
                    "visibility_timeout_seconds": 30
                },
                "after_unknown": {
                    "arn": true,
                    "deduplication_scope": true,
                    "fifo_throughput_limit": true,
                    "id": true,
                    "kms_data_key_reuse_period_seconds": true,
                    "name_prefix": true,
                    "policy": true,
                    "redrive_allow_policy": true,
                    "redrive_policy": true,
                    "sqs_managed_sse_enabled": true,
                    "tags_all": true,
                    "url": true
                },
                "before_sensitive": false,
                "after_sensitive": {
                    "tags_all": {}
                }
            }
        }
    ],
    "output_changes": {
        "sqs_url": {
            "actions": [
                "create"
            ],
            "before": null,
            "after_unknown": true,
            "before_sensitive": false,
            "after_sensitive": false
        }
    },
    "prior_state": {
        "format_version": "1.0",
        "terraform_version": "1.6.1",
        "values": {
            "root_module": {
                "resources": [
                    {
                        "address": "data.aws_iam_policy_document.example_lambda",
                        "mode": "data",
                        "type": "aws_iam_policy_document",
                        "name": "example_lambda",
                        "provider_name": "registry.terraform.io/hashicorp/aws",
                        "schema_version": 0,
                        "values": {
                            "id": "2225346970",
                            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowSQSPermissions\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:GetQueueAttributes\",\n        \"sqs:DeleteMessage\",\n        \"sqs:ChangeMessageVisibility\"\n      ],\n      \"Resource\": \"arn:aws:sqs:*\"\n    },\n    {\n      \"Sid\": \"AllowInvokingLambdas\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"lambda:InvokeFunction\",\n      \"Resource\": \"arn:aws:lambda:ap-southeast-1:*:function:*\"\n    },\n    {\n      \"Sid\": \"AllowCreatingLogGroups\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"logs:CreateLogGroup\",\n      \"Resource\": \"arn:aws:logs:ap-southeast-1:*:*\"\n    },\n    {\n      \"Sid\": \"AllowWritingLogs\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\"\n      ],\n      \"Resource\": \"arn:aws:logs:ap-southeast-1:*:log-group:/aws/lambda/*:*\"\n    }\n  ]\n}",
                            "override_policy_documents": null,
                            "policy_id": null,
                            "source_policy_documents": null,
                            "statement": [
                                {
                                    "actions": [
                                        "sqs:ChangeMessageVisibility",
                                        "sqs:DeleteMessage",
                                        "sqs:GetQueueAttributes",
                                        "sqs:ReceiveMessage"
                                    ],
                                    "condition": [],
                                    "effect": "Allow",
                                    "not_actions": [],
                                    "not_principals": [],
                                    "not_resources": [],
                                    "principals": [],
                                    "resources": [
                                        "arn:aws:sqs:*"
                                    ],
                                    "sid": "AllowSQSPermissions"
                                },
                                {
                                    "actions": [
                                        "lambda:InvokeFunction"
                                    ],
                                    "condition": [],
                                    "effect": "Allow",
                                    "not_actions": [],
                                    "not_principals": [],
                                    "not_resources": [],
                                    "principals": [],
                                    "resources": [
                                        "arn:aws:lambda:ap-southeast-1:*:function:*"
                                    ],
                                    "sid": "AllowInvokingLambdas"
                                },
                                {
                                    "actions": [
                                        "logs:CreateLogGroup"
                                    ],
                                    "condition": [],
                                    "effect": "Allow",
                                    "not_actions": [],
                                    "not_principals": [],
                                    "not_resources": [],
                                    "principals": [],
                                    "resources": [
                                        "arn:aws:logs:ap-southeast-1:*:*"
                                    ],
                                    "sid": "AllowCreatingLogGroups"
                                },
                                {
                                    "actions": [
                                        "logs:CreateLogStream",
                                        "logs:PutLogEvents"
                                    ],
                                    "condition": [],
                                    "effect": "Allow",
                                    "not_actions": [],
                                    "not_principals": [],
                                    "not_resources": [],
                                    "principals": [],
                                    "resources": [
                                        "arn:aws:logs:ap-southeast-1:*:log-group:/aws/lambda/*:*"
                                    ],
                                    "sid": "AllowWritingLogs"
                                }
                            ],
                            "version": "2012-10-17"
                        },
                        "sensitive_values": {
                            "statement": [
                                {
                                    "actions": [
                                        false,
                                        false,
                                        false,
                                        false
                                    ],
                                    "condition": [],
                                    "not_actions": [],
                                    "not_principals": [],
                                    "not_resources": [],
                                    "principals": [],
                                    "resources": [
                                        false
                                    ]
                                },
                                {
                                    "actions": [
                                        false
                                    ],
                                    "condition": [],
                                    "not_actions": [],
                                    "not_principals": [],
                                    "not_resources": [],
                                    "principals": [],
                                    "resources": [
                                        false
                                    ]
                                },
                                {
                                    "actions": [
                                        false
                                    ],
                                    "condition": [],
                                    "not_actions": [],
                                    "not_principals": [],
                                    "not_resources": [],
                                    "principals": [],
                                    "resources": [
                                        false
                                    ]
                                },
                                {
                                    "actions": [
                                        false,
                                        false
                                    ],
                                    "condition": [],
                                    "not_actions": [],
                                    "not_principals": [],
                                    "not_resources": [],
                                    "principals": [],
                                    "resources": [
                                        false
                                    ]
                                }
                            ]
                        }
                    }
                ]
            }
        }
    },
    "configuration": {
        "provider_config": {
            "archive": {
                "name": "archive",
                "full_name": "registry.terraform.io/hashicorp/archive"
            },
            "aws": {
                "name": "aws",
                "full_name": "registry.terraform.io/hashicorp/aws",
                "expressions": {
                    "region": {
                        "constant_value": "ap-southeast-1"
                    }
                }
            }
        },
        "root_module": {
            "outputs": {
                "sqs_url": {
                    "expression": {
                        "references": [
                            "aws_sqs_queue.some_queue.id",
                            "aws_sqs_queue.some_queue"
                        ]
                    }
                }
            },
            "resources": [
                {
                    "address": "aws_iam_policy.example_lambda",
                    "mode": "managed",
                    "type": "aws_iam_policy",
                    "name": "example_lambda",
                    "provider_config_key": "aws",
                    "expressions": {
                        "policy": {
                            "references": [
                                "data.aws_iam_policy_document.example_lambda.json",
                                "data.aws_iam_policy_document.example_lambda"
                            ]
                        }
                    },
                    "schema_version": 0
                },
                {
                    "address": "aws_iam_role.example_lambda",
                    "mode": "managed",
                    "type": "aws_iam_role",
                    "name": "example_lambda",
                    "provider_config_key": "aws",
                    "expressions": {
                        "assume_role_policy": {
                            "constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"
                        }
                    },
                    "schema_version": 0
                },
                {
                    "address": "aws_iam_role_policy_attachment.example_lambda",
                    "mode": "managed",
                    "type": "aws_iam_role_policy_attachment",
                    "name": "example_lambda",
                    "provider_config_key": "aws",
                    "expressions": {
                        "policy_arn": {
                            "references": [
                                "aws_iam_policy.example_lambda.arn",
                                "aws_iam_policy.example_lambda"
                            ]
                        },
                        "role": {
                            "references": [
                                "aws_iam_role.example_lambda.name",
                                "aws_iam_role.example_lambda"
                            ]
                        }
                    },
                    "schema_version": 0
                },
                {
                    "address": "aws_lambda_event_source_mapping.event_source_mapping",
                    "mode": "managed",
                    "type": "aws_lambda_event_source_mapping",
                    "name": "event_source_mapping",
                    "provider_config_key": "aws",
                    "expressions": {
                        "batch_size": {
                            "constant_value": 1
                        },
                        "enabled": {
                            "constant_value": true
                        },
                        "event_source_arn": {
                            "references": [
                                "aws_sqs_queue.some_queue.arn",
                                "aws_sqs_queue.some_queue"
                            ]
                        },
                        "function_name": {
                            "references": [
                                "aws_lambda_function.example_lambda.arn",
                                "aws_lambda_function.example_lambda"
                            ]
                        }
                    },
                    "schema_version": 0
                },
                {
                    "address": "aws_lambda_function.example_lambda",
                    "mode": "managed",
                    "type": "aws_lambda_function",
                    "name": "example_lambda",
                    "provider_config_key": "aws",
                    "expressions": {
                        "filename": {
                            "references": [
                                "data.archive_file.example_lambda.output_path",
                                "data.archive_file.example_lambda"
                            ]
                        },
                        "function_name": {
                            "constant_value": "example_lambda"
                        },
                        "handler": {
                            "constant_value": "example_lambda.handler"
                        },
                        "memory_size": {
                            "constant_value": 128
                        },
                        "role": {
                            "references": [
                                "aws_iam_role.example_lambda.arn",
                                "aws_iam_role.example_lambda"
                            ]
                        },
                        "runtime": {
                            "constant_value": "nodejs6.10"
                        },
                        "source_code_hash": {
                            "references": [
                                "data.archive_file.example_lambda.output_base64sha256",
                                "data.archive_file.example_lambda"
                            ]
                        },
                        "timeout": {
                            "constant_value": 30
                        }
                    },
                    "schema_version": 0
                },
                {
                    "address": "aws_sqs_queue.some_queue",
                    "mode": "managed",
                    "type": "aws_sqs_queue",
                    "name": "some_queue",
                    "provider_config_key": "aws",
                    "expressions": {
                        "name": {
                            "constant_value": "SomeQueue"
                        }
                    },
                    "schema_version": 0
                },
                {
                    "address": "data.archive_file.example_lambda",
                    "mode": "data",
                    "type": "archive_file",
                    "name": "example_lambda",
                    "provider_config_key": "archive",
                    "expressions": {
                        "output_path": {
                            "references": [
                                "path.module"
                            ]
                        },
                        "source_file": {
                            "references": [
                                "path.module"
                            ]
                        },
                        "type": {
                            "constant_value": "zip"
                        }
                    },
                    "schema_version": 0
                },
                {
                    "address": "data.aws_iam_policy_document.example_lambda",
                    "mode": "data",
                    "type": "aws_iam_policy_document",
                    "name": "example_lambda",
                    "provider_config_key": "aws",
                    "expressions": {
                        "statement": [
                            {
                                "actions": {
                                    "constant_value": [
                                        "sqs:ChangeMessageVisibility",
                                        "sqs:DeleteMessage",
                                        "sqs:GetQueueAttributes",
                                        "sqs:ReceiveMessage"
                                    ]
                                },
                                "effect": {
                                    "constant_value": "Allow"
                                },
                                "resources": {
                                    "constant_value": [
                                        "arn:aws:sqs:*"
                                    ]
                                },
                                "sid": {
                                    "constant_value": "AllowSQSPermissions"
                                }
                            },
                            {
                                "actions": {
                                    "constant_value": [
                                        "lambda:InvokeFunction"
                                    ]
                                },
                                "effect": {
                                    "constant_value": "Allow"
                                },
                                "resources": {
                                    "constant_value": [
                                        "arn:aws:lambda:ap-southeast-1:*:function:*"
                                    ]
                                },
                                "sid": {
                                    "constant_value": "AllowInvokingLambdas"
                                }
                            },
                            {
                                "actions": {
                                    "constant_value": [
                                        "logs:CreateLogGroup"
                                    ]
                                },
                                "effect": {
                                    "constant_value": "Allow"
                                },
                                "resources": {
                                    "constant_value": [
                                        "arn:aws:logs:ap-southeast-1:*:*"
                                    ]
                                },
                                "sid": {
                                    "constant_value": "AllowCreatingLogGroups"
                                }
                            },
                            {
                                "actions": {
                                    "constant_value": [
                                        "logs:CreateLogStream",
                                        "logs:PutLogEvents"
                                    ]
                                },
                                "effect": {
                                    "constant_value": "Allow"
                                },
                                "resources": {
                                    "constant_value": [
                                        "arn:aws:logs:ap-southeast-1:*:log-group:/aws/lambda/*:*"
                                    ]
                                },
                                "sid": {
                                    "constant_value": "AllowWritingLogs"
                                }
                            }
                        ]
                    },
                    "schema_version": 0
                }
            ]
        }
    },
    "relevant_attributes": [
        {
            "resource": "data.aws_iam_policy_document.example_lambda",
            "attribute": [
                "json"
            ]
        },
        {
            "resource": "aws_iam_policy.example_lambda",
            "attribute": [
                "arn"
            ]
        },
        {
            "resource": "aws_iam_role.example_lambda",
            "attribute": [
                "name"
            ]
        },
        {
            "resource": "aws_sqs_queue.some_queue",
            "attribute": [
                "id"
            ]
        }
    ],
    "timestamp": "2023-10-13T18:31:06Z",
    "errored": true
}