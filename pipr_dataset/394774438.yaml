Prefix:  company-name-phone-channel-ccp
SSMRoot:  /company-name/phone-channel/ccp
Stage:  dev
Parameters:
  SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter:
    Type: AWS::SSM::Parameter::Value<String>
    Default: /company-name/phone-channel/ccp/connect/connect-id
  AssetParameters70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18dS3Bucket3ADA2554:
    Type: String
    Description: S3 bucket for asset "70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18d"
  AssetParameters70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18dS3VersionKey0CEC7F6A:
    Type: String
    Description: S3 key for asset version "70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18d"
  AssetParameters70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18dArtifactHashD55031EC:
    Type: String
    Description: Artifact hash for asset "70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18d"
  AssetParametersa3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3bS3Bucket107A2AD3:
    Type: String
    Description: S3 bucket for asset "a3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3b"
  AssetParametersa3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3bS3VersionKey0D7A18D1:
    Type: String
    Description: S3 key for asset version "a3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3b"
  AssetParametersa3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3bArtifactHash623C53D0:
    Type: String
    Description: Artifact hash for asset "a3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3b"
  AssetParameters1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718S3BucketBA2635E8:
    Type: String
    Description: S3 bucket for asset "1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718"
  AssetParameters1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718S3VersionKey4D231AC1:
    Type: String
    Description: S3 key for asset version "1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718"
  AssetParameters1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718ArtifactHash33D384EB:
    Type: String
    Description: Artifact hash for asset "1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718"
  AssetParametersedd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2fS3Bucket153FF2E1:
    Type: String
    Description: S3 bucket for asset "edd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2f"
  AssetParametersedd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2fS3VersionKey94060E66:
    Type: String
    Description: S3 key for asset version "edd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2f"
  AssetParametersedd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2fArtifactHashA826254F:
    Type: String
    Description: Artifact hash for asset "edd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2f"
  AssetParameters223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4S3BucketFF8508D5:
    Type: String
    Description: S3 bucket for asset "223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4"
  AssetParameters223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4S3VersionKey5B2B5168:
    Type: String
    Description: S3 key for asset version "223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4"
  AssetParameters223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4ArtifactHashCDA772CC:
    Type: String
    Description: Artifact hash for asset "223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4"
  AssetParameters5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4dS3Bucket82C27CAC:
    Type: String
    Description: S3 bucket for asset "5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4d"
  AssetParameters5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4dS3VersionKey176B6DA5:
    Type: String
    Description: S3 key for asset version "5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4d"
  AssetParameters5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4dArtifactHash5BF00071:
    Type: String
    Description: Artifact hash for asset "5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4d"
  AssetParametersb0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284dS3BucketFE4C519B:
    Type: String
    Description: S3 bucket for asset "b0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284d"
  AssetParametersb0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284dS3VersionKeyEF0271CC:
    Type: String
    Description: S3 key for asset version "b0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284d"
  AssetParametersb0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284dArtifactHashC652783B:
    Type: String
    Description: Artifact hash for asset "b0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284d"
  AssetParametersc2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067S3BucketE8136002:
    Type: String
    Description: S3 bucket for asset "c2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067"
  AssetParametersc2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067S3VersionKeyCBA4B5C3:
    Type: String
    Description: S3 key for asset version "c2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067"
  AssetParametersc2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067ArtifactHashDB4C639F:
    Type: String
    Description: Artifact hash for asset "c2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067"
  AssetParameters6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34S3BucketA1B6BBE2:
    Type: String
    Description: S3 bucket for asset "6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34"
  AssetParameters6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34S3VersionKeyDBE7CFFB:
    Type: String
    Description: S3 key for asset version "6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34"
  AssetParameters6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34ArtifactHashD2AE9B51:
    Type: String
    Description: Artifact hash for asset "6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34"
  AssetParameters39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987aS3BucketC9397D34:
    Type: String
    Description: S3 bucket for asset "39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987a"
  AssetParameters39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987aS3VersionKey8C40BC3B:
    Type: String
    Description: S3 key for asset version "39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987a"
  AssetParameters39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987aArtifactHash039995E5:
    Type: String
    Description: Artifact hash for asset "39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987a"
  AssetParameters2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60beS3Bucket758EAEAC:
    Type: String
    Description: S3 bucket for asset "2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60be"
  AssetParameters2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60beS3VersionKey114964AF:
    Type: String
    Description: S3 key for asset version "2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60be"
  AssetParameters2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60beArtifactHash1EB7E6A8:
    Type: String
    Description: Artifact hash for asset "2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60be"
  AssetParameters8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957fS3BucketD518E174:
    Type: String
    Description: S3 bucket for asset "8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957f"
  AssetParameters8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957fS3VersionKey21592D50:
    Type: String
    Description: S3 key for asset version "8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957f"
  AssetParameters8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957fArtifactHash91C58EB1:
    Type: String
    Description: Artifact hash for asset "8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957f"
  AssetParameters8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804fS3Bucket8037EDD8:
    Type: String
    Description: S3 bucket for asset "8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804f"
  AssetParameters8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804fS3VersionKey6AF2F872:
    Type: String
    Description: S3 key for asset version "8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804f"
  AssetParameters8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804fArtifactHashD91815CC:
    Type: String
    Description: Artifact hash for asset "8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804f"
Outputs:
  ccpConnectIdCfnOutput:
    Value:
      Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
  ccpDeploymentBucketNameCfnOutput:
    Value:
      Ref: ccpDeploymentBucket7CB66C71
  ccpDeploymentBucketOaiNameCfnOutput:
    Value:
      Ref: ccpDeploymentBucketOAI996A5DC7
  cloudFrontUrl:
    Value:
      Fn::Join:
        - ""
        - - https://
          - Fn::GetAtt:
              - DistributionForCCPPageCFDistribution37DD7565
              - DomainName
  cloudFrontDistributionId:
    Value:
      Ref: DistributionForCCPPageCFDistribution37DD7565
  connectDashboardMetricsEndpoint62498F33:
    Value:
      Fn::Join:
        - ""
        - - https://
          - Ref: connectDashboardMetrics5B0A3DEA
          - .execute-api.
          - Ref: AWS::Region
          - "."
          - Ref: AWS::URLSuffix
          - /
          - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
          - /
  apiGatewayID:
    Value:
      Ref: connectDashboardMetrics5B0A3DEA
Resources:
  AgentInfoAC65DCC9:
    Type: AWS::DynamoDB::Table
    Properties:
      KeySchema:
        - AttributeName: agentName
          KeyType: HASH
        - AttributeName: date
          KeyType: RANGE
      AttributeDefinitions:
        - AttributeName: agentName
          AttributeType: S
        - AttributeName: date
          AttributeType: S
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 5
      TableName: AgentInfo
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: ccpStack/AgentInfo/Resource
  CallIntents910D07E1:
    Type: AWS::DynamoDB::Table
    Properties:
      KeySchema:
        - AttributeName: queueName
          KeyType: HASH
      AttributeDefinitions:
        - AttributeName: queueName
          AttributeType: S
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 5
      TableName: CallIntents
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: ccpStack/CallIntents/Resource
  ccpCallIntentsTableNameParam3FAFEA6C:
    Type: AWS::SSM::Parameter
    Properties:
      Type: String
      Value:
        Ref: CallIntents910D07E1
      Description: Name of the call intents table
      Name: /company-name/phone-channel/ccp/dynamodb/ccpCallIntentsTableName
    Metadata:
      aws:cdk:path: ccpStack/ccpCallIntentsTableNameParam/Resource
  ccpDeploymentBucket7CB66C71:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: company-name-phone-channel-ccp-custom-cpp-dev
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        BlockPublicPolicy: true
        IgnorePublicAcls: true
        RestrictPublicBuckets: true
      WebsiteConfiguration:
        IndexDocument: index.html
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: ccpStack/ccpDeploymentBucket/Resource
  ccpDeploymentBucketPolicy82D23995:
    Type: AWS::S3::BucketPolicy
    Properties:
      Bucket:
        Ref: ccpDeploymentBucket7CB66C71
      PolicyDocument:
        Statement:
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
            Effect: Allow
            Principal:
              CanonicalUser:
                Fn::GetAtt:
                  - ccpDeploymentBucketOAI996A5DC7
                  - S3CanonicalUserId
            Resource:
              - Fn::GetAtt:
                  - ccpDeploymentBucket7CB66C71
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - ccpDeploymentBucket7CB66C71
                        - Arn
                    - /*
          - Action: s3:GetObject
            Effect: Allow
            Principal:
              CanonicalUser:
                Fn::GetAtt:
                  - ccpDeploymentBucketOAI996A5DC7
                  - S3CanonicalUserId
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - ccpDeploymentBucket7CB66C71
                      - Arn
                  - /*
        Version: "2012-10-17"
    Metadata:
      aws:cdk:path: ccpStack/ccpDeploymentBucket/Policy/Resource
  ccpDeploymentBucketNameParam0887A0B7:
    Type: AWS::SSM::Parameter
    Properties:
      Type: String
      Value:
        Ref: ccpDeploymentBucket7CB66C71
      Description: Name of the custom ccp deployment Bucket
      Name: /company-name/phone-channel/ccp/bucket/ccpDeploymentBucketName
    Metadata:
      aws:cdk:path: ccpStack/ccpDeploymentBucketNameParam/Resource
  ccpDeploymentBucketOAI996A5DC7:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: CICD-CCP-DeploymentBucket-OAI
    Metadata:
      aws:cdk:path: ccpStack/ccpDeploymentBucketOAI/Resource
  ccpDeploymentBucketOaiNameParamB0BCDA6B:
    Type: AWS::SSM::Parameter
    Properties:
      Type: String
      Value:
        Ref: ccpDeploymentBucketOAI996A5DC7
      Description: Name of the custom ccp deployment Bucket Origin Access Identity
      Name: /company-name/phone-channel/ccp/cloudfront/ccpDeploymentBucketOaiName
    Metadata:
      aws:cdk:path: ccpStack/ccpDeploymentBucketOaiNameParam/Resource
  DistributionForCCPPageCFDistribution37DD7565:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        Comment: CICD - custom CCP
        DefaultCacheBehavior:
          AllowedMethods:
            - GET
            - HEAD
          CachedMethods:
            - GET
            - HEAD
          Compress: true
          ForwardedValues:
            Cookies:
              Forward: none
            QueryString: false
          TargetOriginId: origin1
          ViewerProtocolPolicy: redirect-to-https
        DefaultRootObject: index.html
        Enabled: true
        HttpVersion: http2
        IPV6Enabled: true
        Origins:
          - ConnectionAttempts: 3
            ConnectionTimeout: 10
            DomainName:
              Fn::GetAtt:
                - ccpDeploymentBucket7CB66C71
                - RegionalDomainName
            Id: origin1
            OriginPath: /build
            S3OriginConfig:
              OriginAccessIdentity:
                Fn::Join:
                  - ""
                  - - origin-access-identity/cloudfront/
                    - Ref: ccpDeploymentBucketOAI996A5DC7
        PriceClass: PriceClass_100
        ViewerCertificate:
          CloudFrontDefaultCertificate: true
    Metadata:
      aws:cdk:path: ccpStack/DistributionForCCPPage/CFDistribution
  CustomCCPCloudFrontURL6CDB78A4:
    Type: AWS::SSM::Parameter
    Properties:
      Type: String
      Value:
        Fn::Join:
          - ""
          - - https://
            - Fn::GetAtt:
                - DistributionForCCPPageCFDistribution37DD7565
                - DomainName
      Description: Custom CCP CloudFront url
      Name: /company-name/phone-channel/ccp/cloudfront/ccp-url
    Metadata:
      aws:cdk:path: ccpStack/CustomCCPCloudFrontURL/Resource
  CustomCCPCloudFrontDistributionIdC83AF037:
    Type: AWS::SSM::Parameter
    Properties:
      Type: String
      Value:
        Ref: DistributionForCCPPageCFDistribution37DD7565
      Description: Custom CCP CloudFront  Distribution ID
      Name: /company-name/phone-channel/ccp/cloudfront/ccp-distributioin-id
    Metadata:
      aws:cdk:path: ccpStack/CustomCCPCloudFrontDistributionId/Resource
  CTRUpdateQueueFB5087AC:
    Type: AWS::SQS::Queue
    Properties:
      QueueName: CTRUpdateQueue
      VisibilityTimeout: 900
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: ccpStack/CTRUpdateQueue/Resource
  getActiveAgentsServiceRoleD84A1A7A:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/getActiveAgents/ServiceRole/Resource
  getActiveAgentsServiceRoleDefaultPolicyB5A01032:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: connect:*
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: getActiveAgentsServiceRoleDefaultPolicyB5A01032
      Roles:
        - Ref: getActiveAgentsServiceRoleD84A1A7A
    Metadata:
      aws:cdk:path: ccpStack/getActiveAgents/ServiceRole/DefaultPolicy/Resource
  getActiveAgentsDA2F6D1F:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18dS3Bucket3ADA2554
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18dS3VersionKey0CEC7F6A
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18dS3VersionKey0CEC7F6A
      Role:
        Fn::GetAtt:
          - getActiveAgentsServiceRoleD84A1A7A
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: getActiveAgents
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - getActiveAgentsServiceRoleDefaultPolicyB5A01032
      - getActiveAgentsServiceRoleD84A1A7A
    Metadata:
      aws:cdk:path: ccpStack/getActiveAgents/Resource
      aws:asset:path: asset.70033295d930138cdfc84063d0c35cf1d105a5e662d130e7838dcd463f30d18d
      aws:asset:is-bundled: false
      aws:asset:property: Code
  getAvrAbandTimeServiceRole4BFC1036:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/getAvrAbandTime/ServiceRole/Resource
  getAvrAbandTimeServiceRoleDefaultPolicyADCE7FE0:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: connect:*
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: getAvrAbandTimeServiceRoleDefaultPolicyADCE7FE0
      Roles:
        - Ref: getAvrAbandTimeServiceRole4BFC1036
    Metadata:
      aws:cdk:path: ccpStack/getAvrAbandTime/ServiceRole/DefaultPolicy/Resource
  getAvrAbandTimeB9FF74C1:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParametersa3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3bS3Bucket107A2AD3
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersa3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3bS3VersionKey0D7A18D1
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersa3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3bS3VersionKey0D7A18D1
      Role:
        Fn::GetAtt:
          - getAvrAbandTimeServiceRole4BFC1036
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: getAvrAbandTime
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - getAvrAbandTimeServiceRoleDefaultPolicyADCE7FE0
      - getAvrAbandTimeServiceRole4BFC1036
    Metadata:
      aws:cdk:path: ccpStack/getAvrAbandTime/Resource
      aws:asset:path: asset.a3b6367926231aee2e457913919624a55d461b4a7734527a46edd6f1c8289b3b
      aws:asset:is-bundled: false
      aws:asset:property: Code
  getAvrQueueTimeServiceRoleFF70C7A0:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/getAvrQueueTime/ServiceRole/Resource
  getAvrQueueTimeServiceRoleDefaultPolicyCB1ABF63:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: connect:*
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: getAvrQueueTimeServiceRoleDefaultPolicyCB1ABF63
      Roles:
        - Ref: getAvrQueueTimeServiceRoleFF70C7A0
    Metadata:
      aws:cdk:path: ccpStack/getAvrQueueTime/ServiceRole/DefaultPolicy/Resource
  getAvrQueueTime89E24FF2:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718S3BucketBA2635E8
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718S3VersionKey4D231AC1
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718S3VersionKey4D231AC1
      Role:
        Fn::GetAtt:
          - getAvrQueueTimeServiceRoleFF70C7A0
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: getAvrQueueTime
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - getAvrQueueTimeServiceRoleDefaultPolicyCB1ABF63
      - getAvrQueueTimeServiceRoleFF70C7A0
    Metadata:
      aws:cdk:path: ccpStack/getAvrQueueTime/Resource
      aws:asset:path: asset.1f16567a1b124edcd987c372f8b72c2e9d0be2451872ac7656b5235b70d6d718
      aws:asset:is-bundled: false
      aws:asset:property: Code
  getCallIntentsServiceRole8F93751C:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/getCallIntents/ServiceRole/Resource
  getCallIntentsServiceRoleDefaultPolicyD24B714B:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: dynamodb:*
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - CallIntents910D07E1
                  - Arn
              - Ref: AWS::NoValue
        Version: "2012-10-17"
      PolicyName: getCallIntentsServiceRoleDefaultPolicyD24B714B
      Roles:
        - Ref: getCallIntentsServiceRole8F93751C
    Metadata:
      aws:cdk:path: ccpStack/getCallIntents/ServiceRole/DefaultPolicy/Resource
  getCallIntentsB92F21D5:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParametersedd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2fS3Bucket153FF2E1
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersedd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2fS3VersionKey94060E66
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersedd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2fS3VersionKey94060E66
      Role:
        Fn::GetAtt:
          - getCallIntentsServiceRole8F93751C
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: getCallIntents
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - getCallIntentsServiceRoleDefaultPolicyD24B714B
      - getCallIntentsServiceRole8F93751C
    Metadata:
      aws:cdk:path: ccpStack/getCallIntents/Resource
      aws:asset:path: asset.edd03a5f32dcf29aa430cd22a8924ca42a1804c75055d1aa9e397fd3fe98fc2f
      aws:asset:is-bundled: false
      aws:asset:property: Code
  getCustomersInQueueServiceRole2E813939:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/getCustomersInQueue/ServiceRole/Resource
  getCustomersInQueueServiceRoleDefaultPolicyBA2FFC35:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: connect:*
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: getCustomersInQueueServiceRoleDefaultPolicyBA2FFC35
      Roles:
        - Ref: getCustomersInQueueServiceRole2E813939
    Metadata:
      aws:cdk:path: ccpStack/getCustomersInQueue/ServiceRole/DefaultPolicy/Resource
  getCustomersInQueue0706BE57:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4S3BucketFF8508D5
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4S3VersionKey5B2B5168
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4S3VersionKey5B2B5168
      Role:
        Fn::GetAtt:
          - getCustomersInQueueServiceRole2E813939
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: getCustomersInQueue
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - getCustomersInQueueServiceRoleDefaultPolicyBA2FFC35
      - getCustomersInQueueServiceRole2E813939
    Metadata:
      aws:cdk:path: ccpStack/getCustomersInQueue/Resource
      aws:asset:path: asset.223c3654219d1083e7aedf8e53095f4c15ecce3cd2a77c90a709d1236a1e2dd4
      aws:asset:is-bundled: false
      aws:asset:property: Code
  getIntentMetricsServiceRoleED016470:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/getIntentMetrics/ServiceRole/Resource
  getIntentMetricsServiceRoleDefaultPolicy15D2CC77:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - dynamodb:BatchGetItem
              - dynamodb:GetRecords
              - dynamodb:GetShardIterator
              - dynamodb:Query
              - dynamodb:GetItem
              - dynamodb:Scan
              - dynamodb:ConditionCheckItem
              - dynamodb:BatchWriteItem
              - dynamodb:PutItem
              - dynamodb:UpdateItem
              - dynamodb:DeleteItem
              - dynamodb:DescribeTable
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - AgentInfoAC65DCC9
                  - Arn
              - Ref: AWS::NoValue
        Version: "2012-10-17"
      PolicyName: getIntentMetricsServiceRoleDefaultPolicy15D2CC77
      Roles:
        - Ref: getIntentMetricsServiceRoleED016470
    Metadata:
      aws:cdk:path: ccpStack/getIntentMetrics/ServiceRole/DefaultPolicy/Resource
  getIntentMetrics4371A7C1:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4dS3Bucket82C27CAC
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4dS3VersionKey176B6DA5
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4dS3VersionKey176B6DA5
      Role:
        Fn::GetAtt:
          - getIntentMetricsServiceRoleED016470
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: getIntentMetrics
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - getIntentMetricsServiceRoleDefaultPolicy15D2CC77
      - getIntentMetricsServiceRoleED016470
    Metadata:
      aws:cdk:path: ccpStack/getIntentMetrics/Resource
      aws:asset:path: asset.5dfee1fadafa710b3e25d8e77be19c9da58bd82b477693497ba63b828aae8c4d
      aws:asset:is-bundled: false
      aws:asset:property: Code
  getLongestWaitTimeServiceRole599B4BCF:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/getLongestWaitTime/ServiceRole/Resource
  getLongestWaitTimeServiceRoleDefaultPolicy91B4368B:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: connect:*
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: getLongestWaitTimeServiceRoleDefaultPolicy91B4368B
      Roles:
        - Ref: getLongestWaitTimeServiceRole599B4BCF
    Metadata:
      aws:cdk:path: ccpStack/getLongestWaitTime/ServiceRole/DefaultPolicy/Resource
  getLongestWaitTime7D131801:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParametersb0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284dS3BucketFE4C519B
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersb0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284dS3VersionKeyEF0271CC
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersb0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284dS3VersionKeyEF0271CC
      Role:
        Fn::GetAtt:
          - getLongestWaitTimeServiceRole599B4BCF
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: getLongestWaitTime
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - getLongestWaitTimeServiceRoleDefaultPolicy91B4368B
      - getLongestWaitTimeServiceRole599B4BCF
    Metadata:
      aws:cdk:path: ccpStack/getLongestWaitTime/Resource
      aws:asset:path: asset.b0938f09312abb5b46bce40b9e025cd20edc16c9b245d3191cd91be45a9c284d
      aws:asset:is-bundled: false
      aws:asset:property: Code
  getMissedCallsServiceRole666B968D:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/getMissedCalls/ServiceRole/Resource
  getMissedCallsServiceRoleDefaultPolicy410AF7C8:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: connect:*
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: getMissedCallsServiceRoleDefaultPolicy410AF7C8
      Roles:
        - Ref: getMissedCallsServiceRole666B968D
    Metadata:
      aws:cdk:path: ccpStack/getMissedCalls/ServiceRole/DefaultPolicy/Resource
  getMissedCalls8BBA3F93:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParametersc2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067S3BucketE8136002
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersc2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067S3VersionKeyCBA4B5C3
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersc2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067S3VersionKeyCBA4B5C3
      Role:
        Fn::GetAtt:
          - getMissedCallsServiceRole666B968D
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: getMissedCalls
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - getMissedCallsServiceRoleDefaultPolicy410AF7C8
      - getMissedCallsServiceRole666B968D
    Metadata:
      aws:cdk:path: ccpStack/getMissedCalls/Resource
      aws:asset:path: asset.c2650da159c59259abce1a3824140541e12e6f26c85d0d7b142e8972a1bb4067
      aws:asset:is-bundled: false
      aws:asset:property: Code
  newConnectIdServiceRole9ED8E044:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/newConnectId/ServiceRole/Resource
  newConnectIdServiceRoleDefaultPolicy41D2CCAC:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - dynamodb:BatchGetItem
              - dynamodb:GetRecords
              - dynamodb:GetShardIterator
              - dynamodb:Query
              - dynamodb:GetItem
              - dynamodb:Scan
              - dynamodb:ConditionCheckItem
              - dynamodb:BatchWriteItem
              - dynamodb:PutItem
              - dynamodb:UpdateItem
              - dynamodb:DeleteItem
              - dynamodb:DescribeTable
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - AgentInfoAC65DCC9
                  - Arn
              - Ref: AWS::NoValue
        Version: "2012-10-17"
      PolicyName: newConnectIdServiceRoleDefaultPolicy41D2CCAC
      Roles:
        - Ref: newConnectIdServiceRole9ED8E044
    Metadata:
      aws:cdk:path: ccpStack/newConnectId/ServiceRole/DefaultPolicy/Resource
  newConnectIdF006824F:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34S3BucketA1B6BBE2
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34S3VersionKeyDBE7CFFB
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34S3VersionKeyDBE7CFFB
      Role:
        Fn::GetAtt:
          - newConnectIdServiceRole9ED8E044
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: newConnectId
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - newConnectIdServiceRoleDefaultPolicy41D2CCAC
      - newConnectIdServiceRole9ED8E044
    Metadata:
      aws:cdk:path: ccpStack/newConnectId/Resource
      aws:asset:path: asset.6b546667803ce6eecf48db4488d05db8b4afcf3cf1b38a9a86c17d0fdb951e34
      aws:asset:is-bundled: false
      aws:asset:property: Code
  populateDBServiceRole55E80C18:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/populateDB/ServiceRole/Resource
  populateDBServiceRoleDefaultPolicyA9E8C274:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: dynamodb:*
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - CallIntents910D07E1
                  - Arn
              - Ref: AWS::NoValue
        Version: "2012-10-17"
      PolicyName: populateDBServiceRoleDefaultPolicyA9E8C274
      Roles:
        - Ref: populateDBServiceRole55E80C18
    Metadata:
      aws:cdk:path: ccpStack/populateDB/ServiceRole/DefaultPolicy/Resource
  populateDBC8F6E776:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987aS3BucketC9397D34
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987aS3VersionKey8C40BC3B
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987aS3VersionKey8C40BC3B
      Role:
        Fn::GetAtt:
          - populateDBServiceRole55E80C18
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: populateDB
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - populateDBServiceRoleDefaultPolicyA9E8C274
      - populateDBServiceRole55E80C18
    Metadata:
      aws:cdk:path: ccpStack/populateDB/Resource
      aws:asset:path: asset.39f1063365101876286b96a65d71fda42c751480faf8a2257d8c3ff72b23987a
      aws:asset:is-bundled: false
      aws:asset:property: Code
  updateContactTraceRecordServiceRole3B9A93D6:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/updateContactTraceRecord/ServiceRole/Resource
  updateContactTraceRecordServiceRoleDefaultPolicy3B2D21E7:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: connect:*
            Effect: Allow
            Resource: "*"
          - Action:
              - sqs:ReceiveMessage
              - sqs:ChangeMessageVisibility
              - sqs:GetQueueUrl
              - sqs:DeleteMessage
              - sqs:GetQueueAttributes
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - CTRUpdateQueueFB5087AC
                - Arn
        Version: "2012-10-17"
      PolicyName: updateContactTraceRecordServiceRoleDefaultPolicy3B2D21E7
      Roles:
        - Ref: updateContactTraceRecordServiceRole3B9A93D6
    Metadata:
      aws:cdk:path: ccpStack/updateContactTraceRecord/ServiceRole/DefaultPolicy/Resource
  updateContactTraceRecordB36F9C9A:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60beS3Bucket758EAEAC
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60beS3VersionKey114964AF
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60beS3VersionKey114964AF
      Role:
        Fn::GetAtt:
          - updateContactTraceRecordServiceRole3B9A93D6
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: updateContactTraceRecord
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - updateContactTraceRecordServiceRoleDefaultPolicy3B2D21E7
      - updateContactTraceRecordServiceRole3B9A93D6
    Metadata:
      aws:cdk:path: ccpStack/updateContactTraceRecord/Resource
      aws:asset:path: asset.2a266a34e01fe78c0aeaf6d827e9eeaedc198294d57880d6720b7aac1c4f60be
      aws:asset:is-bundled: false
      aws:asset:property: Code
  updateContactTraceRecordSqsEventSourceccpStackCTRUpdateQueue6BFD28FC0C270E28:
    Type: AWS::Lambda::EventSourceMapping
    Properties:
      FunctionName:
        Ref: updateContactTraceRecordB36F9C9A
      BatchSize: 1
      EventSourceArn:
        Fn::GetAtt:
          - CTRUpdateQueueFB5087AC
          - Arn
    Metadata:
      aws:cdk:path: ccpStack/updateContactTraceRecord/SqsEventSource:ccpStackCTRUpdateQueue6BFD28FC/Resource
  updateIntentTableServiceRole65B74ACB:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/updateIntentTable/ServiceRole/Resource
  updateIntentTableServiceRoleDefaultPolicyCB18B17A:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: dynamodb:*
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - CallIntents910D07E1
                  - Arn
              - Ref: AWS::NoValue
          - Action:
              - dynamodb:BatchGetItem
              - dynamodb:GetRecords
              - dynamodb:GetShardIterator
              - dynamodb:Query
              - dynamodb:GetItem
              - dynamodb:Scan
              - dynamodb:ConditionCheckItem
              - dynamodb:BatchWriteItem
              - dynamodb:PutItem
              - dynamodb:UpdateItem
              - dynamodb:DeleteItem
              - dynamodb:DescribeTable
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - AgentInfoAC65DCC9
                  - Arn
              - Ref: AWS::NoValue
          - Action:
              - sqs:SendMessage
              - sqs:GetQueueAttributes
              - sqs:GetQueueUrl
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - CTRUpdateQueueFB5087AC
                - Arn
        Version: "2012-10-17"
      PolicyName: updateIntentTableServiceRoleDefaultPolicyCB18B17A
      Roles:
        - Ref: updateIntentTableServiceRole65B74ACB
    Metadata:
      aws:cdk:path: ccpStack/updateIntentTable/ServiceRole/DefaultPolicy/Resource
  updateIntentTable1AC6F691:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957fS3BucketD518E174
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957fS3VersionKey21592D50
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957fS3VersionKey21592D50
      Role:
        Fn::GetAtt:
          - updateIntentTableServiceRole65B74ACB
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: updateIntentTable
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - updateIntentTableServiceRoleDefaultPolicyCB18B17A
      - updateIntentTableServiceRole65B74ACB
    Metadata:
      aws:cdk:path: ccpStack/updateIntentTable/Resource
      aws:asset:path: asset.8482d3df9b27b294d836a4ba70416b061f10954e4c73ddfbf079420bfcdf957f
      aws:asset:is-bundled: false
      aws:asset:property: Code
  updateRecordingStatusServiceRoleC3B65331:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: ccpStack/updateRecordingStatus/ServiceRole/Resource
  updateRecordingStatusServiceRoleDefaultPolicy10FB44E5:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: connect:*
            Effect: Allow
            Resource: "*"
          - Action:
              - sqs:SendMessage
              - sqs:GetQueueAttributes
              - sqs:GetQueueUrl
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - CTRUpdateQueueFB5087AC
                - Arn
        Version: "2012-10-17"
      PolicyName: updateRecordingStatusServiceRoleDefaultPolicy10FB44E5
      Roles:
        - Ref: updateRecordingStatusServiceRoleC3B65331
    Metadata:
      aws:cdk:path: ccpStack/updateRecordingStatus/ServiceRole/DefaultPolicy/Resource
  updateRecordingStatusC22F5C51:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804fS3Bucket8037EDD8
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804fS3VersionKey6AF2F872
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804fS3VersionKey6AF2F872
      Role:
        Fn::GetAtt:
          - updateRecordingStatusServiceRoleC3B65331
          - Arn
      Environment:
        Variables:
          AGENT_INFO_TABLE:
            Ref: AgentInfoAC65DCC9
          CALL_INTENTS_TABLE:
            Ref: CallIntents910D07E1
          CONNECT_ID:
            Ref: SsmParameterValuecompanynamephonechannelccpconnectconnectidC96584B6F00A464EAD1953AFF4B05118Parameter
          CTR_QUEUE_URL:
            Ref: CTRUpdateQueueFB5087AC
      FunctionName: updateRecordingStatus
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - updateRecordingStatusServiceRoleDefaultPolicy10FB44E5
      - updateRecordingStatusServiceRoleC3B65331
    Metadata:
      aws:cdk:path: ccpStack/updateRecordingStatus/Resource
      aws:asset:path: asset.8925f0f2ada2619f17c507ed741001ec47c235e311a99b214989927fe680804f
      aws:asset:is-bundled: false
      aws:asset:property: Code
  connectDashboardMetrics5B0A3DEA:
    Type: AWS::ApiGateway::RestApi
    Properties:
      Name: connectDashboardMetrics
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Resource
  connectDashboardMetricsCloudWatchRole768BFA90:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: apigateway.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/CloudWatchRole/Resource
  connectDashboardMetricsAccount68341682:
    Type: AWS::ApiGateway::Account
    Properties:
      CloudWatchRoleArn:
        Fn::GetAtt:
          - connectDashboardMetricsCloudWatchRole768BFA90
          - Arn
    DependsOn:
      - connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Account
  connectDashboardMetricsDeployment08BC3C48efd862491f8b11f86310c20cfdbab6ef:
    Type: AWS::ApiGateway::Deployment
    Properties:
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      Description: Automatically created by the RestApi construct
    DependsOn:
      - connectDashboardMetricsavalAgentsGET1C321588
      - connectDashboardMetricsavalAgents80BB2967
      - connectDashboardMetricsavgMissedWaitTimeGET12E518EA
      - connectDashboardMetricsavgMissedWaitTime9489E8F1
      - connectDashboardMetricsavgQueueTimeGET44FB8466
      - connectDashboardMetricsavgQueueTime45FF1D17
      - connectDashboardMetricsgetCallIntentsproxyGETB22EAB31
      - connectDashboardMetricsgetCallIntentsproxyA4627E04
      - connectDashboardMetricsgetCallIntents28FACDF4
      - connectDashboardMetricsgetIntentsForAgentGET95BD7427
      - connectDashboardMetricsgetIntentsForAgent374EFB16
      - connectDashboardMetricsgetLongestWaitTimeGET691B2AE9
      - connectDashboardMetricsgetLongestWaitTime0A27BA12
      - connectDashboardMetricsinQueueGET5A39EBAE
      - connectDashboardMetricsinQueue0AEC937D
      - connectDashboardMetricsmissedCallsGET86C67A7D
      - connectDashboardMetricsmissedCalls5D29E84B
      - connectDashboardMetricspostNewCallIntentPOSTD3196AD7
      - connectDashboardMetricspostNewCallIntent73090FC7
      - connectDashboardMetricspostNewContactIdPOST04684BA7
      - connectDashboardMetricspostNewContactIdF88290F7
      - connectDashboardMetricsupdateRecordingStatusPOSTE7C58200
      - connectDashboardMetricsupdateRecordingStatusC0E34964
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Deployment/Resource
  connectDashboardMetricsDeploymentStageprodAC060FEB:
    Type: AWS::ApiGateway::Stage
    Properties:
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      DeploymentId:
        Ref: connectDashboardMetricsDeployment08BC3C48efd862491f8b11f86310c20cfdbab6ef
      StageName: prod
    DependsOn:
      - connectDashboardMetricsAccount68341682
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/DeploymentStage.prod/Resource
  connectDashboardMetricsavalAgents80BB2967:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: avalAgents
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avalAgents/Resource
  connectDashboardMetricsavalAgentsGETApiPermissionccpStackconnectDashboardMetricsB7275938GETavalAgents415F225A:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getActiveAgentsDA2F6D1F
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /GET/avalAgents
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avalAgents/GET/ApiPermission.ccpStackconnectDashboardMetricsB7275938.GET..avalAgents
  connectDashboardMetricsavalAgentsGETApiPermissionTestccpStackconnectDashboardMetricsB7275938GETavalAgents6945BD6C:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getActiveAgentsDA2F6D1F
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/GET/avalAgents
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avalAgents/GET/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.GET..avalAgents
  connectDashboardMetricsavalAgentsGET1C321588:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: connectDashboardMetricsavalAgents80BB2967
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - getActiveAgentsDA2F6D1F
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avalAgents/GET/Resource
  connectDashboardMetricsavgMissedWaitTime9489E8F1:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: avgMissedWaitTime
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avgMissedWaitTime/Resource
  connectDashboardMetricsavgMissedWaitTimeGETApiPermissionccpStackconnectDashboardMetricsB7275938GETavgMissedWaitTime52099B5B:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getAvrAbandTimeB9FF74C1
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /GET/avgMissedWaitTime
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avgMissedWaitTime/GET/ApiPermission.ccpStackconnectDashboardMetricsB7275938.GET..avgMissedWaitTime
  connectDashboardMetricsavgMissedWaitTimeGETApiPermissionTestccpStackconnectDashboardMetricsB7275938GETavgMissedWaitTimeE1B2FDEF:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getAvrAbandTimeB9FF74C1
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/GET/avgMissedWaitTime
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avgMissedWaitTime/GET/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.GET..avgMissedWaitTime
  connectDashboardMetricsavgMissedWaitTimeGET12E518EA:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: connectDashboardMetricsavgMissedWaitTime9489E8F1
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - getAvrAbandTimeB9FF74C1
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avgMissedWaitTime/GET/Resource
  connectDashboardMetricsavgQueueTime45FF1D17:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: avgQueueTime
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avgQueueTime/Resource
  connectDashboardMetricsavgQueueTimeGETApiPermissionccpStackconnectDashboardMetricsB7275938GETavgQueueTime10E76134:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getCustomersInQueue0706BE57
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /GET/avgQueueTime
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avgQueueTime/GET/ApiPermission.ccpStackconnectDashboardMetricsB7275938.GET..avgQueueTime
  connectDashboardMetricsavgQueueTimeGETApiPermissionTestccpStackconnectDashboardMetricsB7275938GETavgQueueTime2B971BFB:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getCustomersInQueue0706BE57
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/GET/avgQueueTime
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avgQueueTime/GET/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.GET..avgQueueTime
  connectDashboardMetricsavgQueueTimeGET44FB8466:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: connectDashboardMetricsavgQueueTime45FF1D17
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - getCustomersInQueue0706BE57
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/avgQueueTime/GET/Resource
  connectDashboardMetricsgetIntentsForAgent374EFB16:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: getIntentsForAgent
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getIntentsForAgent/Resource
  connectDashboardMetricsgetIntentsForAgentGETApiPermissionccpStackconnectDashboardMetricsB7275938GETgetIntentsForAgentE2521E64:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getIntentMetrics4371A7C1
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /GET/getIntentsForAgent
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getIntentsForAgent/GET/ApiPermission.ccpStackconnectDashboardMetricsB7275938.GET..getIntentsForAgent
  connectDashboardMetricsgetIntentsForAgentGETApiPermissionTestccpStackconnectDashboardMetricsB7275938GETgetIntentsForAgentC9A2C898:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getIntentMetrics4371A7C1
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/GET/getIntentsForAgent
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getIntentsForAgent/GET/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.GET..getIntentsForAgent
  connectDashboardMetricsgetIntentsForAgentGET95BD7427:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: connectDashboardMetricsgetIntentsForAgent374EFB16
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - getIntentMetrics4371A7C1
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getIntentsForAgent/GET/Resource
  connectDashboardMetricsgetLongestWaitTime0A27BA12:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: getLongestWaitTime
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getLongestWaitTime/Resource
  connectDashboardMetricsgetLongestWaitTimeGETApiPermissionccpStackconnectDashboardMetricsB7275938GETgetLongestWaitTime0B2D7278:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getLongestWaitTime7D131801
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /GET/getLongestWaitTime
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getLongestWaitTime/GET/ApiPermission.ccpStackconnectDashboardMetricsB7275938.GET..getLongestWaitTime
  connectDashboardMetricsgetLongestWaitTimeGETApiPermissionTestccpStackconnectDashboardMetricsB7275938GETgetLongestWaitTimeD2204739:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getLongestWaitTime7D131801
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/GET/getLongestWaitTime
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getLongestWaitTime/GET/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.GET..getLongestWaitTime
  connectDashboardMetricsgetLongestWaitTimeGET691B2AE9:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: connectDashboardMetricsgetLongestWaitTime0A27BA12
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - getLongestWaitTime7D131801
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getLongestWaitTime/GET/Resource
  connectDashboardMetricsinQueue0AEC937D:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: inQueue
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/inQueue/Resource
  connectDashboardMetricsinQueueGETApiPermissionccpStackconnectDashboardMetricsB7275938GETinQueueD57644F7:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getCustomersInQueue0706BE57
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /GET/inQueue
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/inQueue/GET/ApiPermission.ccpStackconnectDashboardMetricsB7275938.GET..inQueue
  connectDashboardMetricsinQueueGETApiPermissionTestccpStackconnectDashboardMetricsB7275938GETinQueue9C8A281F:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getCustomersInQueue0706BE57
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/GET/inQueue
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/inQueue/GET/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.GET..inQueue
  connectDashboardMetricsinQueueGET5A39EBAE:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: connectDashboardMetricsinQueue0AEC937D
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - getCustomersInQueue0706BE57
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/inQueue/GET/Resource
  connectDashboardMetricsgetCallIntents28FACDF4:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: getCallIntents
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getCallIntents/Resource
  connectDashboardMetricsgetCallIntentsproxyA4627E04:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Ref: connectDashboardMetricsgetCallIntents28FACDF4
      PathPart: "{proxy+}"
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getCallIntents/{proxy+}/Resource
  connectDashboardMetricsgetCallIntentsproxyGETApiPermissionccpStackconnectDashboardMetricsB7275938GETgetCallIntentsproxy0A2CDAA2:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getCallIntentsB92F21D5
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /GET/getCallIntents/*
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getCallIntents/{proxy+}/GET/ApiPermission.ccpStackconnectDashboardMetricsB7275938.GET..getCallIntents.{proxy+}
  connectDashboardMetricsgetCallIntentsproxyGETApiPermissionTestccpStackconnectDashboardMetricsB7275938GETgetCallIntentsproxyF6032D79:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getCallIntentsB92F21D5
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/GET/getCallIntents/*
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getCallIntents/{proxy+}/GET/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.GET..getCallIntents.{proxy+}
  connectDashboardMetricsgetCallIntentsproxyGETB22EAB31:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: connectDashboardMetricsgetCallIntentsproxyA4627E04
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - getCallIntentsB92F21D5
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/getCallIntents/{proxy+}/GET/Resource
  connectDashboardMetricsmissedCalls5D29E84B:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: missedCalls
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/missedCalls/Resource
  connectDashboardMetricsmissedCallsGETApiPermissionccpStackconnectDashboardMetricsB7275938GETmissedCalls6A1A9867:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getMissedCalls8BBA3F93
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /GET/missedCalls
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/missedCalls/GET/ApiPermission.ccpStackconnectDashboardMetricsB7275938.GET..missedCalls
  connectDashboardMetricsmissedCallsGETApiPermissionTestccpStackconnectDashboardMetricsB7275938GETmissedCalls8E1AC38A:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - getMissedCalls8BBA3F93
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/GET/missedCalls
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/missedCalls/GET/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.GET..missedCalls
  connectDashboardMetricsmissedCallsGET86C67A7D:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: connectDashboardMetricsmissedCalls5D29E84B
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - getMissedCalls8BBA3F93
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/missedCalls/GET/Resource
  connectDashboardMetricspostNewCallIntent73090FC7:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: postNewCallIntent
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/postNewCallIntent/Resource
  connectDashboardMetricspostNewCallIntentPOSTApiPermissionccpStackconnectDashboardMetricsB7275938POSTpostNewCallIntent35D3E214:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - updateIntentTable1AC6F691
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /POST/postNewCallIntent
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/postNewCallIntent/POST/ApiPermission.ccpStackconnectDashboardMetricsB7275938.POST..postNewCallIntent
  connectDashboardMetricspostNewCallIntentPOSTApiPermissionTestccpStackconnectDashboardMetricsB7275938POSTpostNewCallIntentAB0549DE:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - updateIntentTable1AC6F691
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/POST/postNewCallIntent
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/postNewCallIntent/POST/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.POST..postNewCallIntent
  connectDashboardMetricspostNewCallIntentPOSTD3196AD7:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: connectDashboardMetricspostNewCallIntent73090FC7
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - updateIntentTable1AC6F691
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/postNewCallIntent/POST/Resource
  connectDashboardMetricspostNewContactIdF88290F7:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: postNewContactId
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/postNewContactId/Resource
  connectDashboardMetricspostNewContactIdPOSTApiPermissionccpStackconnectDashboardMetricsB7275938POSTpostNewContactIdE0CBFC3A:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - newConnectIdF006824F
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /POST/postNewContactId
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/postNewContactId/POST/ApiPermission.ccpStackconnectDashboardMetricsB7275938.POST..postNewContactId
  connectDashboardMetricspostNewContactIdPOSTApiPermissionTestccpStackconnectDashboardMetricsB7275938POSTpostNewContactIdF6021C85:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - newConnectIdF006824F
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/POST/postNewContactId
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/postNewContactId/POST/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.POST..postNewContactId
  connectDashboardMetricspostNewContactIdPOST04684BA7:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: connectDashboardMetricspostNewContactIdF88290F7
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - newConnectIdF006824F
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/postNewContactId/POST/Resource
  connectDashboardMetricsupdateRecordingStatusC0E34964:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - connectDashboardMetrics5B0A3DEA
          - RootResourceId
      PathPart: updateRecordingStatus
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/updateRecordingStatus/Resource
  connectDashboardMetricsupdateRecordingStatusPOSTApiPermissionccpStackconnectDashboardMetricsB7275938POSTupdateRecordingStatus660A3C51:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - updateRecordingStatusC22F5C51
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /
            - Ref: connectDashboardMetricsDeploymentStageprodAC060FEB
            - /POST/updateRecordingStatus
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/updateRecordingStatus/POST/ApiPermission.ccpStackconnectDashboardMetricsB7275938.POST..updateRecordingStatus
  connectDashboardMetricsupdateRecordingStatusPOSTApiPermissionTestccpStackconnectDashboardMetricsB7275938POSTupdateRecordingStatusE0FF49C8:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - updateRecordingStatusC22F5C51
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: connectDashboardMetrics5B0A3DEA
            - /test-invoke-stage/POST/updateRecordingStatus
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/updateRecordingStatus/POST/ApiPermission.Test.ccpStackconnectDashboardMetricsB7275938.POST..updateRecordingStatus
  connectDashboardMetricsupdateRecordingStatusPOSTE7C58200:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: connectDashboardMetricsupdateRecordingStatusC0E34964
      RestApiId:
        Ref: connectDashboardMetrics5B0A3DEA
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - updateRecordingStatusC22F5C51
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: ccpStack/connectDashboardMetrics/Default/updateRecordingStatus/POST/Resource
  CustomCCPApiGatewayId1D0F8802:
    Type: AWS::SSM::Parameter
    Properties:
      Type: String
      Value:
        Ref: connectDashboardMetrics5B0A3DEA
      Description: Custom CCP API Gateway ID
      Name: /company-name/phone-channel/ccp/apigateway/ccp-apigateway-id
    Metadata:
      aws:cdk:path: ccpStack/CustomCCPApiGatewayId/Resource
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAA/21STW/CMAz9LdxDWDdp2nF8DGkHRAeTdk4TwwJt0sUJrIr635ekhTKJU57t5z77uRnNnjP6MHplZxxzcZx4rg1Qv7WMH8l8p3JmWAUWDNkAamc4xOza2dpZMkUEG6h7qfZkrhVa47iNhFtyKAhppVYtiSpeNIpVWhTUf7KiTJQEWoJYRWkTPjfo3g4RKE/Uzxw/QpLpUffkupS8GdJ93AUzhkGAl9qJndHKUr82Msw95RwQ3wUoK21qnkfOMnLuM67lLygWMqwsCxe3i723cZj1B6n/cODSjgm0pGRVIRj1S6f4pe2K305BZZucW7G6Trbu1P1sDqaSiElJsmDcRndmpncwo0PRuTGL90KazkZYLffMwpk1oRXQTmvZX+4Cw+baKUsWUJe6qcIQacchiqdPkh24HD16/e93ueIV2G8tYqpHudG/zaXcti1RWgA94OSUvdDskWajA0o5NmEMWQHddO8f5FzVM7YCAAA=
    Metadata:
      aws:cdk:path: ccpStack/CDKMetadata/Default
    Condition: CDKMetadataAvailable
Conditions:
  CDKMetadataAvailable:
    Fn::Or:
      - Fn::Or:
          - Fn::Equals:
              - Ref: AWS::Region
              - af-south-1
          - Fn::Equals:
              - Ref: AWS::Region
              - ap-east-1
          - Fn::Equals:
              - Ref: AWS::Region
              - ap-northeast-1
          - Fn::Equals:
              - Ref: AWS::Region
              - ap-northeast-2
          - Fn::Equals:
              - Ref: AWS::Region
              - ap-south-1
          - Fn::Equals:
              - Ref: AWS::Region
              - ap-southeast-1
          - Fn::Equals:
              - Ref: AWS::Region
              - ap-southeast-2
          - Fn::Equals:
              - Ref: AWS::Region
              - ca-central-1
          - Fn::Equals:
              - Ref: AWS::Region
              - cn-north-1
          - Fn::Equals:
              - Ref: AWS::Region
              - cn-northwest-1
      - Fn::Or:
          - Fn::Equals:
              - Ref: AWS::Region
              - eu-central-1
          - Fn::Equals:
              - Ref: AWS::Region
              - eu-north-1
          - Fn::Equals:
              - Ref: AWS::Region
              - eu-south-1
          - Fn::Equals:
              - Ref: AWS::Region
              - eu-west-1
          - Fn::Equals:
              - Ref: AWS::Region
              - eu-west-2
          - Fn::Equals:
              - Ref: AWS::Region
              - eu-west-3
          - Fn::Equals:
              - Ref: AWS::Region
              - me-south-1
          - Fn::Equals:
              - Ref: AWS::Region
              - sa-east-1
          - Fn::Equals:
              - Ref: AWS::Region
              - us-east-1
          - Fn::Equals:
              - Ref: AWS::Region
              - us-east-2
      - Fn::Or:
          - Fn::Equals:
              - Ref: AWS::Region
              - us-west-1
          - Fn::Equals:
              - Ref: AWS::Region
              - us-west-2

