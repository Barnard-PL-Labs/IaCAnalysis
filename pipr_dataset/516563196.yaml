Resources:
  BusTicketingCustomRole8BCF3774:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - arn:aws:iam::aws:policy/AmazonSQSReadOnlyAccess
      RoleName: BusTicketing_CustomRole
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_CustomRole/Resource
  BusTicketingCustomRoleDefaultPolicyEF559759:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - dynamodb:BatchGetItem
              - dynamodb:BatchWriteItem
              - dynamodb:ConditionCheckItem
              - dynamodb:DeleteItem
              - dynamodb:DescribeTable
              - dynamodb:GetItem
              - dynamodb:GetRecords
              - dynamodb:GetShardIterator
              - dynamodb:PutItem
              - dynamodb:Query
              - dynamodb:Scan
              - dynamodb:UpdateItem
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - BusTicketingBusRouteTable92824A3D
                  - Arn
              - Fn::GetAtt:
                  - BusTicketingBusTableC52A115B
                  - Arn
              - Fn::GetAtt:
                  - BusTicketingBusTripTableFBE4B1EB
                  - Arn
              - Fn::GetAtt:
                  - BusTicketingBusUnitTable192AC1BF
                  - Arn
              - Fn::GetAtt:
                  - BusTicketingUsersTable2E10B8C8
                  - Arn
              - Ref: AWS::NoValue
          - Action:
              - dynamodb:BatchGetItem
              - dynamodb:ConditionCheckItem
              - dynamodb:DescribeTable
              - dynamodb:GetItem
              - dynamodb:GetRecords
              - dynamodb:GetShardIterator
              - dynamodb:Query
              - dynamodb:Scan
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - BusTicketingBusRouteTable92824A3D
                  - Arn
              - Fn::GetAtt:
                  - BusTicketingBusTableC52A115B
                  - Arn
              - Fn::GetAtt:
                  - BusTicketingBusUnitTable192AC1BF
                  - Arn
              - Ref: AWS::NoValue
        Version: "2012-10-17"
      PolicyName: BusTicketingCustomRoleDefaultPolicyEF559759
      Roles:
        - Ref: BusTicketingCustomRole8BCF3774
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_CustomRole/DefaultPolicy/Resource
  BusTicketingUsersTable2E10B8C8:
    Type: AWS::DynamoDB::Table
    Properties:
      KeySchema:
        - AttributeName: id
          KeyType: HASH
        - AttributeName: type
          KeyType: RANGE
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
        - AttributeName: type
          AttributeType: S
      BillingMode: PAY_PER_REQUEST
      TableName: BusTicketing_UsersTable
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_UsersTable/Resource
  BusTicketingBusTableC52A115B:
    Type: AWS::DynamoDB::Table
    Properties:
      KeySchema:
        - AttributeName: id
          KeyType: HASH
        - AttributeName: company
          KeyType: RANGE
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
        - AttributeName: company
          AttributeType: S
      BillingMode: PAY_PER_REQUEST
      TableName: BusTicketing_BusTable
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_BusTable/Resource
  BusTicketingBusUnitTable192AC1BF:
    Type: AWS::DynamoDB::Table
    Properties:
      KeySchema:
        - AttributeName: id
          KeyType: HASH
        - AttributeName: bus
          KeyType: RANGE
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
        - AttributeName: bus
          AttributeType: S
      BillingMode: PAY_PER_REQUEST
      TableName: BusTicketing_BusUnitTable
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_BusUnitTable/Resource
  BusTicketingBusRouteTable92824A3D:
    Type: AWS::DynamoDB::Table
    Properties:
      KeySchema:
        - AttributeName: id
          KeyType: HASH
        - AttributeName: bus
          KeyType: RANGE
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
        - AttributeName: bus
          AttributeType: S
      BillingMode: PAY_PER_REQUEST
      TableName: BusTicketing_BusRouteTable
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_BusRouteTable/Resource
  BusTicketingBusTripTableFBE4B1EB:
    Type: AWS::DynamoDB::Table
    Properties:
      KeySchema:
        - AttributeName: id
          KeyType: HASH
        - AttributeName: bus_unit
          KeyType: RANGE
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
        - AttributeName: bus_unit
          AttributeType: S
      BillingMode: PAY_PER_REQUEST
      TableName: BusTicketing_BusTripTable
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_BusTripTable/Resource
  BusTicketingUsersF33D90FD:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-036406153779-us-east-1
        S3Key: 1a2445b1b59f557740c19799e3ac4226fbfeae28ac772c67c2a0a63b400def97.zip
      Role:
        Fn::GetAtt:
          - BusTicketingCustomRole8BCF3774
          - Arn
      Description: An API Lambda Integration that will process API requests coming from Users API.
      Environment:
        Variables:
          USERS_TABLE:
            Ref: BusTicketingUsersTable2E10B8C8
      FunctionName: BusTicketing_Users
      Handler: users
      MemorySize: 1024
      Runtime: go1.x
      Timeout: 60
    DependsOn:
      - BusTicketingCustomRoleDefaultPolicyEF559759
      - BusTicketingCustomRole8BCF3774
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_Users/Resource
      aws:asset:path: asset.1a2445b1b59f557740c19799e3ac4226fbfeae28ac772c67c2a0a63b400def97
      aws:asset:is-bundled: false
      aws:asset:property: Code
  BusTicketingBus8DBD2595:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-036406153779-us-east-1
        S3Key: 01f5596b7aa4ed4e28d3b71e9035235410d4f2fcd30cb4c4ccdff916efc19863.zip
      Role:
        Fn::GetAtt:
          - BusTicketingCustomRole8BCF3774
          - Arn
      Description: An API Lambda Integration that will process API requests coming from Bus API
      Environment:
        Variables:
          BUS_TABLE:
            Ref: BusTicketingBusTableC52A115B
      FunctionName: BusTicketing_Bus
      Handler: bus
      MemorySize: 1024
      Runtime: go1.x
      Timeout: 60
    DependsOn:
      - BusTicketingCustomRoleDefaultPolicyEF559759
      - BusTicketingCustomRole8BCF3774
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_Bus/Resource
      aws:asset:path: asset.01f5596b7aa4ed4e28d3b71e9035235410d4f2fcd30cb4c4ccdff916efc19863
      aws:asset:is-bundled: false
      aws:asset:property: Code
  BusTicketingBusUnitDC44B3DC:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-036406153779-us-east-1
        S3Key: af3e7cde336c8ada50e5a2535b69b7bc662184c0da648bee9f5b2300053d46c2.zip
      Role:
        Fn::GetAtt:
          - BusTicketingCustomRole8BCF3774
          - Arn
      Description: An API Lambda Integration that will process API requests coming from Bus Unit API
      Environment:
        Variables:
          BUS_TABLE:
            Ref: BusTicketingBusTableC52A115B
          BUS_UNIT_TABLE:
            Ref: BusTicketingBusUnitTable192AC1BF
      FunctionName: BusTicketing_BusUnit
      Handler: busUnit
      MemorySize: 1024
      Runtime: go1.x
      Timeout: 60
    DependsOn:
      - BusTicketingCustomRoleDefaultPolicyEF559759
      - BusTicketingCustomRole8BCF3774
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_BusUnit/Resource
      aws:asset:path: asset.af3e7cde336c8ada50e5a2535b69b7bc662184c0da648bee9f5b2300053d46c2
      aws:asset:is-bundled: false
      aws:asset:property: Code
  BusTicketingBusRoute056FA232:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-036406153779-us-east-1
        S3Key: a5d72a024828d782de828eff9198f6d1243c7b74faac11c55a82d36ad06140be.zip
      Role:
        Fn::GetAtt:
          - BusTicketingCustomRole8BCF3774
          - Arn
      Description: An API Lambda Integration that will process API requests coming from Bus Route API
      Environment:
        Variables:
          BUS_UNIT_TABLE:
            Ref: BusTicketingBusUnitTable192AC1BF
          BUS_ROUTE_TABLE:
            Ref: BusTicketingBusRouteTable92824A3D
      FunctionName: BusTicketing_BusRoute
      Handler: busRoute
      MemorySize: 1024
      Runtime: go1.x
      Timeout: 60
    DependsOn:
      - BusTicketingCustomRoleDefaultPolicyEF559759
      - BusTicketingCustomRole8BCF3774
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_BusRoute/Resource
      aws:asset:path: asset.a5d72a024828d782de828eff9198f6d1243c7b74faac11c55a82d36ad06140be
      aws:asset:is-bundled: false
      aws:asset:property: Code
  BusTicketingBusTripDDBEB985:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-036406153779-us-east-1
        S3Key: 0582143e4bc5fd956c9aaa50dc2ae49e06e98ec8c107bdcd113edde921aafd62.zip
      Role:
        Fn::GetAtt:
          - BusTicketingCustomRole8BCF3774
          - Arn
      Description: An API Lambda Integration that will process API requests coming from Bus Trip API
      Environment:
        Variables:
          BUS_UNIT_TABLE:
            Ref: BusTicketingBusUnitTable192AC1BF
          BUS_TRIP_TABLE:
            Ref: BusTicketingBusTripTableFBE4B1EB
          BUS_ROUTE_TABLE:
            Ref: BusTicketingBusRouteTable92824A3D
      FunctionName: BusTicketing_BusTrip
      Handler: busTrip
      MemorySize: 1024
      Runtime: go1.x
      Timeout: 60
    DependsOn:
      - BusTicketingCustomRoleDefaultPolicyEF559759
      - BusTicketingCustomRole8BCF3774
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/BusTicketing_BusTrip/Resource
      aws:asset:path: asset.0582143e4bc5fd956c9aaa50dc2ae49e06e98ec8c107bdcd113edde921aafd62
      aws:asset:is-bundled: false
      aws:asset:property: Code
  busticketingapi046972A9:
    Type: AWS::ApiGateway::RestApi
    Properties:
      Description: An API for Users, Bus, and Transaction.
      Name: bus-ticketing-api
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Resource
  busticketingapiCloudWatchRole1D704660:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: apigateway.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/CloudWatchRole/Resource
  busticketingapiAccountDE544E3D:
    Type: AWS::ApiGateway::Account
    Properties:
      CloudWatchRoleArn:
        Fn::GetAtt:
          - busticketingapiCloudWatchRole1D704660
          - Arn
    DependsOn:
      - busticketingapi046972A9
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Account
  busticketingapiDeployment8E01376F84656f92a3e9a140c1feb79f35d4c137:
    Type: AWS::ApiGateway::Deployment
    Properties:
      RestApiId:
        Ref: busticketingapi046972A9
      Description: Automatically created by the RestApi construct
    DependsOn:
      - busticketingapibusGET1754AEE1
      - busticketingapibusPOST2458D551
      - busticketingapibusFF957A68
      - busticketingapibusrouteGETDFD88883
      - busticketingapibusroutePOSTE3D21153
      - busticketingapibusroute2D12432F
      - busticketingapibustripGETF40D9250
      - busticketingapibustripPOST0DA658A5
      - busticketingapibustripD78D625B
      - busticketingapibusunitGETB52FDE49
      - busticketingapibusunitPOSTA063FA0A
      - busticketingapibusunit5F26D335
      - busticketingapiusersGET899D9322
      - busticketingapiusersPOST3F664305
      - busticketingapiusersFC68A0D7
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Deployment/Resource
  busticketingapiDeploymentStageprodC3A1148B:
    Type: AWS::ApiGateway::Stage
    Properties:
      RestApiId:
        Ref: busticketingapi046972A9
      DeploymentId:
        Ref: busticketingapiDeployment8E01376F84656f92a3e9a140c1feb79f35d4c137
      StageName: prod
    DependsOn:
      - busticketingapiAccountDE544E3D
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/DeploymentStage.prod/Resource
  busticketingapiusersFC68A0D7:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - busticketingapi046972A9
          - RootResourceId
      PathPart: users
      RestApiId:
        Ref: busticketingapi046972A9
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/users/Resource
  busticketingapiusersGETApiPermissionBusTicketingStackbusticketingapi4D151FB2GETusers6868C3FC:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingUsersF33D90FD
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /GET/users
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/users/GET/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.GET..users
  busticketingapiusersGETApiPermissionTestBusTicketingStackbusticketingapi4D151FB2GETusers75342B4F:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingUsersF33D90FD
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/GET/users
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/users/GET/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.GET..users
  busticketingapiusersGET899D9322:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: busticketingapiusersFC68A0D7
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingUsersF33D90FD
                  - Arn
              - /invocations
      RequestParameters:
        method.request.querystring.id: true
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/users/GET/Resource
  busticketingapiusersPOSTApiPermissionBusTicketingStackbusticketingapi4D151FB2POSTusers1D510ECC:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingUsersF33D90FD
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /POST/users
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/users/POST/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.POST..users
  busticketingapiusersPOSTApiPermissionTestBusTicketingStackbusticketingapi4D151FB2POSTusers041F856D:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingUsersF33D90FD
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/POST/users
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/users/POST/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.POST..users
  busticketingapiusersPOST3F664305:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: busticketingapiusersFC68A0D7
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingUsersF33D90FD
                  - Arn
              - /invocations
      RequestParameters:
        method.request.querystring.type: true
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/users/POST/Resource
  busticketingapibusFF957A68:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - busticketingapi046972A9
          - RootResourceId
      PathPart: bus
      RestApiId:
        Ref: busticketingapi046972A9
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/Resource
  busticketingapibusGETApiPermissionBusTicketingStackbusticketingapi4D151FB2GETbus4B73ACB3:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBus8DBD2595
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /GET/bus
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/GET/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.GET..bus
  busticketingapibusGETApiPermissionTestBusTicketingStackbusticketingapi4D151FB2GETbusD88BF968:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBus8DBD2595
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/GET/bus
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/GET/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.GET..bus
  busticketingapibusGET1754AEE1:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: busticketingapibusFF957A68
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingBus8DBD2595
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/GET/Resource
  busticketingapibusPOSTApiPermissionBusTicketingStackbusticketingapi4D151FB2POSTbusF95C361E:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBus8DBD2595
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /POST/bus
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/POST/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.POST..bus
  busticketingapibusPOSTApiPermissionTestBusTicketingStackbusticketingapi4D151FB2POSTbus73B81181:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBus8DBD2595
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/POST/bus
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/POST/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.POST..bus
  busticketingapibusPOST2458D551:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: busticketingapibusFF957A68
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingBus8DBD2595
                  - Arn
              - /invocations
      RequestParameters:
        method.request.querystring.type: true
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/POST/Resource
  busticketingapibusunit5F26D335:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Ref: busticketingapibusFF957A68
      PathPart: unit
      RestApiId:
        Ref: busticketingapi046972A9
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/unit/Resource
  busticketingapibusunitGETApiPermissionBusTicketingStackbusticketingapi4D151FB2GETbusunit8628ED61:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusUnitDC44B3DC
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /GET/bus/unit
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/unit/GET/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.GET..bus.unit
  busticketingapibusunitGETApiPermissionTestBusTicketingStackbusticketingapi4D151FB2GETbusunit6BF7108C:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusUnitDC44B3DC
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/GET/bus/unit
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/unit/GET/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.GET..bus.unit
  busticketingapibusunitGETB52FDE49:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: busticketingapibusunit5F26D335
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingBusUnitDC44B3DC
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/unit/GET/Resource
  busticketingapibusunitPOSTApiPermissionBusTicketingStackbusticketingapi4D151FB2POSTbusunit0C0D1886:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusUnitDC44B3DC
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /POST/bus/unit
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/unit/POST/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.POST..bus.unit
  busticketingapibusunitPOSTApiPermissionTestBusTicketingStackbusticketingapi4D151FB2POSTbusunit8CAA38EF:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusUnitDC44B3DC
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/POST/bus/unit
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/unit/POST/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.POST..bus.unit
  busticketingapibusunitPOSTA063FA0A:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: busticketingapibusunit5F26D335
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingBusUnitDC44B3DC
                  - Arn
              - /invocations
      RequestParameters:
        method.request.querystring.bus: true
        method.request.querystring.type: true
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/unit/POST/Resource
  busticketingapibusroute2D12432F:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Ref: busticketingapibusFF957A68
      PathPart: route
      RestApiId:
        Ref: busticketingapi046972A9
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/route/Resource
  busticketingapibusrouteGETApiPermissionBusTicketingStackbusticketingapi4D151FB2GETbusroute3F7C0839:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusRoute056FA232
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /GET/bus/route
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/route/GET/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.GET..bus.route
  busticketingapibusrouteGETApiPermissionTestBusTicketingStackbusticketingapi4D151FB2GETbusroute850002DF:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusRoute056FA232
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/GET/bus/route
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/route/GET/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.GET..bus.route
  busticketingapibusrouteGETDFD88883:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: busticketingapibusroute2D12432F
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingBusRoute056FA232
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/route/GET/Resource
  busticketingapibusroutePOSTApiPermissionBusTicketingStackbusticketingapi4D151FB2POSTbusroute908DCEBB:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusRoute056FA232
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /POST/bus/route
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/route/POST/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.POST..bus.route
  busticketingapibusroutePOSTApiPermissionTestBusTicketingStackbusticketingapi4D151FB2POSTbusroute4B52AA32:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusRoute056FA232
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/POST/bus/route
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/route/POST/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.POST..bus.route
  busticketingapibusroutePOSTE3D21153:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: busticketingapibusroute2D12432F
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingBusRoute056FA232
                  - Arn
              - /invocations
      RequestParameters:
        method.request.querystring.type: true
        method.request.querystring.unit: true
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/route/POST/Resource
  busticketingapibustripD78D625B:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Ref: busticketingapibusFF957A68
      PathPart: trip
      RestApiId:
        Ref: busticketingapi046972A9
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/trip/Resource
  busticketingapibustripGETApiPermissionBusTicketingStackbusticketingapi4D151FB2GETbustrip9212D66D:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusTripDDBEB985
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /GET/bus/trip
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/trip/GET/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.GET..bus.trip
  busticketingapibustripGETApiPermissionTestBusTicketingStackbusticketingapi4D151FB2GETbustrip1D01E916:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusTripDDBEB985
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/GET/bus/trip
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/trip/GET/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.GET..bus.trip
  busticketingapibustripGETF40D9250:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: busticketingapibustripD78D625B
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingBusTripDDBEB985
                  - Arn
              - /invocations
      RequestParameters:
        method.request.querystring.unit: true
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/trip/GET/Resource
  busticketingapibustripPOSTApiPermissionBusTicketingStackbusticketingapi4D151FB2POSTbustrip3BC4DA22:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusTripDDBEB985
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /
            - Ref: busticketingapiDeploymentStageprodC3A1148B
            - /POST/bus/trip
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/trip/POST/ApiPermission.BusTicketingStackbusticketingapi4D151FB2.POST..bus.trip
  busticketingapibustripPOSTApiPermissionTestBusTicketingStackbusticketingapi4D151FB2POSTbustrip35319F6B:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - BusTicketingBusTripDDBEB985
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:us-east-1:036406153779:"
            - Ref: busticketingapi046972A9
            - /test-invoke-stage/POST/bus/trip
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/trip/POST/ApiPermission.Test.BusTicketingStackbusticketingapi4D151FB2.POST..bus.trip
  busticketingapibustripPOST0DA658A5:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: busticketingapibustripD78D625B
      RestApiId:
        Ref: busticketingapi046972A9
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :apigateway:us-east-1:lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - BusTicketingBusTripDDBEB985
                  - Arn
              - /invocations
      RequestParameters:
        method.request.querystring.seat: true
        method.request.querystring.route: true
    Metadata:
      aws:cdk:path: BusTicketingStack/bus-ticketing-api/Default/bus/trip/POST/Resource
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAA/02QzU7EMAyEn2XvaaDLhWsXxA2xKtxXaWJKtvmp6oRVVeXdcRIBPfkbOx6Nc+TtI78/iBs2Uk2N0QPf3oOQE+sBfVwkMJpdNi0s33pvgD19ulLP3mi5ZlkpMbU6Yb0ihw8x1JcFEjPCDkrw7SU6GbR3ebTnMyxWI5JKDB8uAhEC8i4X0vwU5QThJJDCzHoUAW5ipTiAoZt1SfSPnZQ+usCeYTZ+tUBI3Z2i88YSrsLvncX+7+jqWfkVwpdXuVUpJVai5X3txjx4i2GOYb+VmPMK+BXvvumH2yNvD1fUulkom7bA+1p/AAtKUmWAAQAA
    Metadata:
      aws:cdk:path: BusTicketingStack/CDKMetadata/Default
Outputs:
  busticketingapiEndpoint957F0813:
    Value:
      Fn::Join:
        - ""
        - - https://
          - Ref: busticketingapi046972A9
          - .execute-api.us-east-1.
          - Ref: AWS::URLSuffix
          - /
          - Ref: busticketingapiDeploymentStageprodC3A1148B
          - /
Parameters:
  BootstrapVersion:
    Type: AWS::SSM::Parameter::Value<String>
    Default: /cdk-bootstrap/hnb659fds/version
    Description: Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]
Rules:
  CheckBootstrapVersion:
    Assertions:
      - Assert:
          Fn::Not:
            - Fn::Contains:
                - - "1"
                  - "2"
                  - "3"
                  - "4"
                  - "5"
                - Ref: BootstrapVersion
        AssertDescription: CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.

