
> pokeserverless@2.0.0 deploy
> ts-node bin.ts

Attention: Next.js now collects completely anonymous telemetry regarding usage.
This information is used to shape Next.js' roadmap and prioritize features.
You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
https://nextjs.org/telemetry

info  - Checking validity of types...
info  - Creating an optimized production build...
info  - Compiled successfully
info  - Collecting page data...
info  - Generating static pages (0/29)
info  - Generating static pages (7/29)
info  - Generating static pages (14/29)
info  - Generating static pages (21/29)
info  - Generating static pages (29/29)
info  - Finalizing page optimization...

Page                                                  Size     First Load JS
┌ ○ /                                                 1.01 kB        77.6 kB
├   /_app                                             0 B            71.2 kB
├ λ /[ditto]                                          1.62 kB        78.2 kB
├ ○ /404                                              194 B          71.4 kB
├ λ /isr                                              2.83 kB          74 kB
├ ● /pokemons/[porygon] (ISR: 300 Seconds) (9771 ms)  1.73 kB        78.3 kB
├   ├ /pokemons/squirtle (697 ms)
├   ├ /pokemons/venusaur (666 ms)
├   ├ /pokemons/fearow (531 ms)
├   ├ /pokemons/arbok (523 ms)
├   ├ /pokemons/charizard (472 ms)
├   ├ /pokemons/pidgeotto (437 ms)
├   ├ /pokemons/spearow (437 ms)
├   └ [+18 more paths] (avg 333 ms)
├ λ /random                                           1.58 kB        78.2 kB
└ λ /ssr                                              2.82 kB          74 kB
+ First Load JS shared by all                         71.2 kB
  ├ chunks/framework-5f4595e5518b5600.js              42 kB
  ├ chunks/main-01df828e572375b9.js                   27.6 kB
  ├ chunks/pages/_app-8b6d06a76396b171.js             786 B
  ├ chunks/webpack-fd82975a6094609f.js                727 B
  └ css/c0211f7fddf41e66.css                          802 B

λ  (Lambda)  server-side renders at runtime (uses getInitialProps or getServerSideProps)
○  (Static)  automatically rendered as static HTML (uses no initial props)
●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)
   (ISR)     incremental static regeneration (uses revalidate in getStaticProps)

Description: Testing deploying NextJS Serverless Construct
Resources:
  NextJsAppPublicAssets04474AF7:
    Type: AWS::S3::Bucket
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/PublicAssets/Resource
  NextJsAppPublicAssetsPolicy3EC07500:
    Type: AWS::S3::BucketPolicy
    Properties:
      Bucket:
        Ref: NextJsAppPublicAssets04474AF7
      PolicyDocument:
        Statement:
          - Action: s3:GetObject
            Effect: Allow
            Principal:
              AWS: "*"
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - NextJsAppPublicAssets04474AF7
                      - Arn
                  - /*
          - Action:
              - s3:GetBucket*
              - s3:List*
              - s3:DeleteObject*
            Effect: Allow
            Principal:
              AWS:
                Fn::GetAtt:
                  - CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092
                  - Arn
            Resource:
              - Fn::GetAtt:
                  - NextJsAppPublicAssets04474AF7
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - NextJsAppPublicAssets04474AF7
                        - Arn
                    - /*
          - Action: s3:GetObject
            Effect: Allow
            Principal:
              CanonicalUser:
                Fn::GetAtt:
                  - NextJsAppNextJSDistributionOrigin1S3Origin760DE64A
                  - S3CanonicalUserId
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - NextJsAppPublicAssets04474AF7
                      - Arn
                  - /*
          - Action: s3:GetObject
            Effect: Allow
            Principal:
              CanonicalUser:
                Fn::GetAtt:
                  - NextJsAppNextJSDistributionOrigin2S3Origin9E9817DB
                  - S3CanonicalUserId
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - NextJsAppPublicAssets04474AF7
                      - Arn
                  - /*
          - Action: s3:GetObject
            Effect: Allow
            Principal:
              CanonicalUser:
                Fn::GetAtt:
                  - NextJsAppNextJSDistributionOrigin3S3Origin20C3EFCA
                  - S3CanonicalUserId
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - NextJsAppPublicAssets04474AF7
                      - Arn
                  - /*
          - Action: s3:GetObject
            Effect: Allow
            Principal:
              CanonicalUser:
                Fn::GetAtt:
                  - NextJsAppNextJSDistributionOrigin4S3OriginE84D59E0
                  - S3CanonicalUserId
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - NextJsAppPublicAssets04474AF7
                      - Arn
                  - /*
          - Action: s3:GetObject
            Effect: Allow
            Principal:
              CanonicalUser:
                Fn::GetAtt:
                  - NextJsAppNextJSDistributionOrigin5S3Origin584D6386
                  - S3CanonicalUserId
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - NextJsAppPublicAssets04474AF7
                      - Arn
                  - /*
        Version: "2012-10-17"
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/PublicAssets/Policy/Resource
  NextJsAppPublicAssetsAutoDeleteObjectsCustomResource34FD50D1:
    Type: Custom::S3AutoDeleteObjects
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F
          - Arn
      BucketName:
        Ref: NextJsAppPublicAssets04474AF7
    DependsOn:
      - NextJsAppPublicAssetsPolicy3EC07500
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/PublicAssets/AutoDeleteObjectsCustomResource/Default
  NextJsAppRegenerationQueue96599808:
    Type: AWS::SQS::Queue
    Properties:
      FifoQueue: true
      QueueName:
        Fn::Join:
          - ""
          - - Ref: NextJsAppPublicAssets04474AF7
            - .fifo
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/RegenerationQueue/Resource
  NextJsAppRegenerationFunctionServiceRoleF1B42AD1:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/RegenerationFunction/ServiceRole/Resource
  NextJsAppRegenerationFunctionServiceRoleDefaultPolicyAF1CB12A:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - sqs:ReceiveMessage
              - sqs:ChangeMessageVisibility
              - sqs:GetQueueUrl
              - sqs:DeleteMessage
              - sqs:GetQueueAttributes
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - NextJsAppRegenerationQueue96599808
                - Arn
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
              - s3:DeleteObject*
              - s3:PutObject*
              - s3:Abort*
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - NextJsAppPublicAssets04474AF7
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - NextJsAppPublicAssets04474AF7
                        - Arn
                    - /*
        Version: "2012-10-17"
      PolicyName: NextJsAppRegenerationFunctionServiceRoleDefaultPolicyAF1CB12A
      Roles:
        - Ref: NextJsAppRegenerationFunctionServiceRoleF1B42AD1
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/RegenerationFunction/ServiceRole/DefaultPolicy/Resource
  NextJsAppRegenerationFunction62381AA2:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78S3Bucket0F26858B
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78S3VersionKey51901B24
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78S3VersionKey51901B24
      Role:
        Fn::GetAtt:
          - NextJsAppRegenerationFunctionServiceRoleF1B42AD1
          - Arn
      Handler: index.handler
      Runtime: nodejs14.x
      Timeout: 30
    DependsOn:
      - NextJsAppRegenerationFunctionServiceRoleDefaultPolicyAF1CB12A
      - NextJsAppRegenerationFunctionServiceRoleF1B42AD1
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/RegenerationFunction/Resource
      aws:asset:path: asset.2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78
      aws:asset:property: Code
  NextJsAppRegenerationFunctionSqsEventSourceNextJsPokeStackNextJsAppRegenerationQueue74007F6A32ED8771:
    Type: AWS::Lambda::EventSourceMapping
    Properties:
      FunctionName:
        Ref: NextJsAppRegenerationFunction62381AA2
      EventSourceArn:
        Fn::GetAtt:
          - NextJsAppRegenerationQueue96599808
          - Arn
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/RegenerationFunction/SqsEventSource:NextJsPokeStackNextJsAppRegenerationQueue74007F6A/Resource
  NextJsAppNextEdgeLambdaRole6A1616F1:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
                - edgelambda.amazonaws.com
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: edgelambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextEdgeLambdaRole/Resource
  NextJsAppNextEdgeLambdaRoleDefaultPolicy5EC23234:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
              - s3:DeleteObject*
              - s3:PutObject*
              - s3:Abort*
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - NextJsAppPublicAssets04474AF7
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - NextJsAppPublicAssets04474AF7
                        - Arn
                    - /*
          - Action:
              - sqs:SendMessage
              - sqs:GetQueueAttributes
              - sqs:GetQueueUrl
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - NextJsAppRegenerationQueue96599808
                - Arn
          - Action: lambda:InvokeFunction
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - NextJsAppRegenerationFunction62381AA2
                - Arn
        Version: "2012-10-17"
      PolicyName: NextJsAppNextEdgeLambdaRoleDefaultPolicy5EC23234
      Roles:
        - Ref: NextJsAppNextEdgeLambdaRole6A1616F1
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextEdgeLambdaRole/DefaultPolicy/Resource
  NextJsAppNextLambdaBA081175:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParametersf3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008dS3Bucket31A9F37F
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersf3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008dS3VersionKey283DB3A2
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersf3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008dS3VersionKey283DB3A2
      Role:
        Fn::GetAtt:
          - NextJsAppNextEdgeLambdaRole6A1616F1
          - Arn
      Description: Default Lambda@Edge for Next CloudFront distribution
      FunctionName: FnNextJsPokeStack
      Handler: index.handler
      MemorySize: 1024
      Runtime: nodejs12.x
      Timeout: 30
    DependsOn:
      - NextJsAppNextEdgeLambdaRoleDefaultPolicy5EC23234
      - NextJsAppNextEdgeLambdaRole6A1616F1
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextLambda/Resource
      aws:asset:path: asset.f3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008d
      aws:asset:property: Code
  NextJsAppNextLambdaLogRetentionB6609DC5:
    Type: Custom::LogRetention
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A
          - Arn
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: NextJsAppNextLambdaBA081175
      RetentionInDays: 3
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextLambda/LogRetention/Resource
  NextJsAppNextLambdaCurrentVersion4A0FAFFFc13a7a377c56ee7bd93e11e40f332242:
    Type: AWS::Lambda::Version
    Properties:
      FunctionName:
        Ref: NextJsAppNextLambdaBA081175
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextLambda/CurrentVersion/Resource
  NextJsAppNextLambdaCurrentVersionAliasliveA2F1A336:
    Type: AWS::Lambda::Alias
    Properties:
      FunctionName:
        Ref: NextJsAppNextLambdaBA081175
      FunctionVersion:
        Fn::GetAtt:
          - NextJsAppNextLambdaCurrentVersion4A0FAFFFc13a7a377c56ee7bd93e11e40f332242
          - Version
      Name: live
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextLambda/CurrentVersion/Aliaslive/Resource
  NextJsAppNextImageLambda8C77998E:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616S3Bucket9790E16F
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616S3VersionKey48B8D4CE
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616S3VersionKey48B8D4CE
      Role:
        Fn::GetAtt:
          - NextJsAppNextEdgeLambdaRole6A1616F1
          - Arn
      Description: Default Lambda@Edge for Next Image CloudFront distribution
      FunctionName: NextJsPokeStackImage
      Handler: index.handler
      MemorySize: 1024
      Runtime: nodejs12.x
      Timeout: 30
    DependsOn:
      - NextJsAppNextEdgeLambdaRoleDefaultPolicy5EC23234
      - NextJsAppNextEdgeLambdaRole6A1616F1
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextImageLambda/Resource
      aws:asset:path: asset.005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616
      aws:asset:property: Code
  NextJsAppNextImageLambdaLogRetention29947842:
    Type: Custom::LogRetention
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A
          - Arn
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: NextJsAppNextImageLambda8C77998E
      RetentionInDays: 3
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextImageLambda/LogRetention/Resource
  NextJsAppNextImageLambdaCurrentVersionE2204C8275603a14a28fd701af59b26bf707487d:
    Type: AWS::Lambda::Version
    Properties:
      FunctionName:
        Ref: NextJsAppNextImageLambda8C77998E
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextImageLambda/CurrentVersion/Resource
  NextJsAppNextImageLambdaCurrentVersionEventInvokeConfig73E90EBB:
    Type: AWS::Lambda::EventInvokeConfig
    Properties:
      FunctionName:
        Ref: NextJsAppNextImageLambda8C77998E
      Qualifier:
        Fn::GetAtt:
          - NextJsAppNextImageLambdaCurrentVersionE2204C8275603a14a28fd701af59b26bf707487d
          - Version
      MaximumRetryAttempts: 1
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextImageLambda/CurrentVersion/EventInvokeConfig/Resource
  NextJsAppNextImageLambdaCurrentVersionAliasliveA63EAB75:
    Type: AWS::Lambda::Alias
    Properties:
      FunctionName:
        Ref: NextJsAppNextImageLambda8C77998E
      FunctionVersion:
        Fn::GetAtt:
          - NextJsAppNextImageLambdaCurrentVersionE2204C8275603a14a28fd701af59b26bf707487d
          - Version
      Name: live
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextImageLambda/CurrentVersion/Aliaslive/Resource
  NextJsAppNextStaticsCache6EC2D576:
    Type: AWS::CloudFront::CachePolicy
    Properties:
      CachePolicyConfig:
        DefaultTTL: 2592000
        MaxTTL: 2592000
        MinTTL: 2592000
        Name: NextJsPokeStackNextJsAppNextStaticsCacheF6339819-us-east-1
        ParametersInCacheKeyAndForwardedToOrigin:
          CookiesConfig:
            CookieBehavior: none
          EnableAcceptEncodingBrotli: true
          EnableAcceptEncodingGzip: true
          HeadersConfig:
            HeaderBehavior: none
          QueryStringsConfig:
            QueryStringBehavior: none
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextStaticsCache/Resource
  NextJsAppNextImageCacheA9CBA950:
    Type: AWS::CloudFront::CachePolicy
    Properties:
      CachePolicyConfig:
        DefaultTTL: 86400
        MaxTTL: 31536000
        MinTTL: 0
        Name: NextJsPokeStackNextJsAppNextImageCacheA4D093E3-us-east-1
        ParametersInCacheKeyAndForwardedToOrigin:
          CookiesConfig:
            CookieBehavior: none
          EnableAcceptEncodingBrotli: true
          EnableAcceptEncodingGzip: true
          HeadersConfig:
            HeaderBehavior: whitelist
            Headers:
              - Accept
          QueryStringsConfig:
            QueryStringBehavior: all
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextImageCache/Resource
  NextJsAppNextLambdaCache2A7551F8:
    Type: AWS::CloudFront::CachePolicy
    Properties:
      CachePolicyConfig:
        DefaultTTL: 0
        MaxTTL: 31536000
        MinTTL: 0
        Name: NextJsPokeStackNextJsAppNextLambdaCacheBDE474EB-us-east-1
        ParametersInCacheKeyAndForwardedToOrigin:
          CookiesConfig:
            CookieBehavior: all
          EnableAcceptEncodingBrotli: true
          EnableAcceptEncodingGzip: true
          HeadersConfig:
            HeaderBehavior: none
          QueryStringsConfig:
            QueryStringBehavior: all
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextLambdaCache/Resource
  NextJsAppImageOriginRequest6AF71D57:
    Type: AWS::CloudFront::OriginRequestPolicy
    Properties:
      OriginRequestPolicyConfig:
        CookiesConfig:
          CookieBehavior: none
        HeadersConfig:
          HeaderBehavior: none
        Name: NextJsPokeStackNextJsAppImageOriginRequest06B821B2
        QueryStringsConfig:
          QueryStringBehavior: all
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/ImageOriginRequest/Resource
  NextJsAppNextJSDistributionOrigin1S3Origin760DE64A:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: Identity for NextJsPokeStackNextJsAppNextJSDistributionOrigin1BA736F69
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextJSDistribution/Origin1/S3Origin/Resource
  NextJsAppNextJSDistributionOrigin2S3Origin9E9817DB:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: Identity for NextJsPokeStackNextJsAppNextJSDistributionOrigin250866CF3
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextJSDistribution/Origin2/S3Origin/Resource
  NextJsAppNextJSDistributionOrigin3S3Origin20C3EFCA:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: Identity for NextJsPokeStackNextJsAppNextJSDistributionOrigin38048F7BE
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextJSDistribution/Origin3/S3Origin/Resource
  NextJsAppNextJSDistributionOrigin4S3OriginE84D59E0:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: Identity for NextJsPokeStackNextJsAppNextJSDistributionOrigin4C46BB6F4
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextJSDistribution/Origin4/S3Origin/Resource
  NextJsAppNextJSDistributionOrigin5S3Origin584D6386:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: Identity for NextJsPokeStackNextJsAppNextJSDistributionOrigin5FB99C1D4
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextJSDistribution/Origin5/S3Origin/Resource
  NextJsAppNextJSDistributionLoggingBucket37E3858A:
    Type: AWS::S3::Bucket
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextJSDistribution/LoggingBucket/Resource
  NextJsAppNextJSDistributionB60DA7A7:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        CacheBehaviors:
          - AllowedMethods:
              - GET
              - HEAD
              - OPTIONS
              - PUT
              - PATCH
              - POST
              - DELETE
            CachePolicyId:
              Ref: NextJsAppNextImageCacheA9CBA950
            CachedMethods:
              - GET
              - HEAD
              - OPTIONS
            Compress: true
            LambdaFunctionAssociations:
              - EventType: origin-request
                LambdaFunctionARN:
                  Ref: NextJsAppNextImageLambdaCurrentVersionE2204C8275603a14a28fd701af59b26bf707487d
            OriginRequestPolicyId:
              Ref: NextJsAppImageOriginRequest6AF71D57
            PathPattern: _next/image*
            TargetOriginId: NextJsPokeStackNextJsAppNextJSDistributionOrigin250866CF3
            ViewerProtocolPolicy: redirect-to-https
          - AllowedMethods:
              - GET
              - HEAD
              - OPTIONS
            CachePolicyId:
              Ref: NextJsAppNextLambdaCache2A7551F8
            CachedMethods:
              - GET
              - HEAD
              - OPTIONS
            Compress: true
            LambdaFunctionAssociations:
              - EventType: origin-request
                IncludeBody: true
                LambdaFunctionARN:
                  Ref: NextJsAppNextLambdaCurrentVersion4A0FAFFFc13a7a377c56ee7bd93e11e40f332242
              - EventType: origin-response
                LambdaFunctionARN:
                  Ref: NextJsAppNextLambdaCurrentVersion4A0FAFFFc13a7a377c56ee7bd93e11e40f332242
            PathPattern: _next/data/*
            TargetOriginId: NextJsPokeStackNextJsAppNextJSDistributionOrigin38048F7BE
            ViewerProtocolPolicy: redirect-to-https
          - AllowedMethods:
              - GET
              - HEAD
              - OPTIONS
            CachePolicyId:
              Ref: NextJsAppNextStaticsCache6EC2D576
            CachedMethods:
              - GET
              - HEAD
              - OPTIONS
            Compress: true
            PathPattern: _next/*
            TargetOriginId: NextJsPokeStackNextJsAppNextJSDistributionOrigin4C46BB6F4
            ViewerProtocolPolicy: redirect-to-https
          - AllowedMethods:
              - GET
              - HEAD
              - OPTIONS
            CachePolicyId:
              Ref: NextJsAppNextStaticsCache6EC2D576
            CachedMethods:
              - GET
              - HEAD
              - OPTIONS
            Compress: true
            PathPattern: static/*
            TargetOriginId: NextJsPokeStackNextJsAppNextJSDistributionOrigin5FB99C1D4
            ViewerProtocolPolicy: redirect-to-https
        DefaultCacheBehavior:
          AllowedMethods:
            - GET
            - HEAD
            - OPTIONS
          CachePolicyId:
            Ref: NextJsAppNextLambdaCache2A7551F8
          CachedMethods:
            - GET
            - HEAD
            - OPTIONS
          Compress: true
          LambdaFunctionAssociations:
            - EventType: origin-request
              IncludeBody: true
              LambdaFunctionARN:
                Ref: NextJsAppNextLambdaCurrentVersion4A0FAFFFc13a7a377c56ee7bd93e11e40f332242
            - EventType: origin-response
              LambdaFunctionARN:
                Ref: NextJsAppNextLambdaCurrentVersion4A0FAFFFc13a7a377c56ee7bd93e11e40f332242
          TargetOriginId: NextJsPokeStackNextJsAppNextJSDistributionOrigin1BA736F69
          ViewerProtocolPolicy: redirect-to-https
        DefaultRootObject: ""
        Enabled: true
        HttpVersion: http2
        IPV6Enabled: true
        Logging:
          Bucket:
            Fn::GetAtt:
              - NextJsAppNextJSDistributionLoggingBucket37E3858A
              - RegionalDomainName
        Origins:
          - DomainName:
              Fn::GetAtt:
                - NextJsAppPublicAssets04474AF7
                - RegionalDomainName
            Id: NextJsPokeStackNextJsAppNextJSDistributionOrigin1BA736F69
            S3OriginConfig:
              OriginAccessIdentity:
                Fn::Join:
                  - ""
                  - - origin-access-identity/cloudfront/
                    - Ref: NextJsAppNextJSDistributionOrigin1S3Origin760DE64A
          - DomainName:
              Fn::GetAtt:
                - NextJsAppPublicAssets04474AF7
                - RegionalDomainName
            Id: NextJsPokeStackNextJsAppNextJSDistributionOrigin250866CF3
            S3OriginConfig:
              OriginAccessIdentity:
                Fn::Join:
                  - ""
                  - - origin-access-identity/cloudfront/
                    - Ref: NextJsAppNextJSDistributionOrigin2S3Origin9E9817DB
          - DomainName:
              Fn::GetAtt:
                - NextJsAppPublicAssets04474AF7
                - RegionalDomainName
            Id: NextJsPokeStackNextJsAppNextJSDistributionOrigin38048F7BE
            S3OriginConfig:
              OriginAccessIdentity:
                Fn::Join:
                  - ""
                  - - origin-access-identity/cloudfront/
                    - Ref: NextJsAppNextJSDistributionOrigin3S3Origin20C3EFCA
          - DomainName:
              Fn::GetAtt:
                - NextJsAppPublicAssets04474AF7
                - RegionalDomainName
            Id: NextJsPokeStackNextJsAppNextJSDistributionOrigin4C46BB6F4
            S3OriginConfig:
              OriginAccessIdentity:
                Fn::Join:
                  - ""
                  - - origin-access-identity/cloudfront/
                    - Ref: NextJsAppNextJSDistributionOrigin4S3OriginE84D59E0
          - DomainName:
              Fn::GetAtt:
                - NextJsAppPublicAssets04474AF7
                - RegionalDomainName
            Id: NextJsPokeStackNextJsAppNextJSDistributionOrigin5FB99C1D4
            S3OriginConfig:
              OriginAccessIdentity:
                Fn::Join:
                  - ""
                  - - origin-access-identity/cloudfront/
                    - Ref: NextJsAppNextJSDistributionOrigin5S3Origin584D6386
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/NextJSDistribution/Resource
  NextJsAppAssetDeploymentBuildIDAwsCliLayer8F0726F2:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket:
          Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3BucketAEADE8C7
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
      Description: /opt/awscli/aws
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeploymentBuildID/AwsCliLayer/Resource
      aws:asset:path: asset.e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68.zip
      aws:asset:property: Content
  NextJsAppAssetDeploymentBuildIDCustomResource52DC1C3E:
    Type: Custom::CDKBucketDeployment
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536
          - Arn
      SourceBucketNames:
        - Ref: AssetParameters8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4S3BucketF38C2A52
      SourceObjectKeys:
        - Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4S3VersionKeyE157C120
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4S3VersionKeyE157C120
      DestinationBucketName:
        Ref: NextJsAppPublicAssets04474AF7
      DestinationBucketKeyPrefix: /BUILD_ID
      Prune: true
      DistributionId:
        Ref: NextJsAppNextJSDistributionB60DA7A7
      DistributionPaths:
        - /*
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeploymentBuildID/CustomResource/Default
  NextJsAppAssetDeploymentpublicFilesAwsCliLayer1B7510EC:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket:
          Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3BucketAEADE8C7
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
      Description: /opt/awscli/aws
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeployment_publicFiles/AwsCliLayer/Resource
      aws:asset:path: asset.e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68.zip
      aws:asset:property: Content
  NextJsAppAssetDeploymentpublicFilesCustomResource1BA9394D:
    Type: Custom::CDKBucketDeployment
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536
          - Arn
      SourceBucketNames:
        - Ref: AssetParameters586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897dS3BucketE901F994
      SourceObjectKeys:
        - Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897dS3VersionKeyA90F4FD0
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897dS3VersionKeyA90F4FD0
      DestinationBucketName:
        Ref: NextJsAppPublicAssets04474AF7
      DestinationBucketKeyPrefix: public
      Prune: true
      SystemMetadata:
        cache-control: public, max-age=31536000, must-revalidate
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeployment_publicFiles/CustomResource/Default
  NextJsAppAssetDeploymentstaticPagesAwsCliLayer78AEE35E:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket:
          Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3BucketAEADE8C7
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
      Description: /opt/awscli/aws
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeployment_staticPages/AwsCliLayer/Resource
      aws:asset:path: asset.e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68.zip
      aws:asset:property: Content
  NextJsAppAssetDeploymentstaticPagesCustomResource977D68A2:
    Type: Custom::CDKBucketDeployment
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536
          - Arn
      SourceBucketNames:
        - Ref: AssetParametersae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6eS3Bucket624C14E8
      SourceObjectKeys:
        - Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6eS3VersionKey61154E89
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6eS3VersionKey61154E89
      DestinationBucketName:
        Ref: NextJsAppPublicAssets04474AF7
      DestinationBucketKeyPrefix: static-pages
      Prune: true
      SystemMetadata:
        cache-control: public, max-age=0, s-maxage=2678400, must-revalidate
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeployment_staticPages/CustomResource/Default
  NextJsAppAssetDeploymentnextDataAwsCliLayerAAC11871:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket:
          Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3BucketAEADE8C7
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
      Description: /opt/awscli/aws
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeployment_nextData/AwsCliLayer/Resource
      aws:asset:path: asset.e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68.zip
      aws:asset:property: Content
  NextJsAppAssetDeploymentnextDataCustomResourceCF384C13:
    Type: Custom::CDKBucketDeployment
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536
          - Arn
      SourceBucketNames:
        - Ref: AssetParameters1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7S3BucketF362E2EA
      SourceObjectKeys:
        - Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7S3VersionKey1CF20F63
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7S3VersionKey1CF20F63
      DestinationBucketName:
        Ref: NextJsAppPublicAssets04474AF7
      DestinationBucketKeyPrefix: _next/data
      Prune: true
      SystemMetadata:
        cache-control: public, max-age=0, s-maxage=2678400, must-revalidate
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeployment_nextData/CustomResource/Default
  NextJsAppAssetDeploymentnextStaticAwsCliLayer01F74D38:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket:
          Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3BucketAEADE8C7
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
      Description: /opt/awscli/aws
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeployment_nextStatic/AwsCliLayer/Resource
      aws:asset:path: asset.e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68.zip
      aws:asset:property: Content
  NextJsAppAssetDeploymentnextStaticCustomResourceA44267FC:
    Type: Custom::CDKBucketDeployment
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536
          - Arn
      SourceBucketNames:
        - Ref: AssetParameters1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32S3Bucket92E07749
      SourceObjectKeys:
        - Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32S3VersionKey635894C8
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32S3VersionKey635894C8
      DestinationBucketName:
        Ref: NextJsAppPublicAssets04474AF7
      DestinationBucketKeyPrefix: _next/static
      Prune: true
      SystemMetadata:
        cache-control: public, max-age=31536000, immutable
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: NextJsPokeStack/NextJsApp/AssetDeployment_nextStatic/CustomResource/Default
  CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: "2012-10-17"
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
      ManagedPolicyArns:
        - Fn::Sub: arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: NextJsPokeStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role
  CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392S3BucketBF7A7F3F
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392S3VersionKeyFAF93626
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392S3VersionKeyFAF93626
      Timeout: 900
      MemorySize: 128
      Handler: __entrypoint__.handler
      Role:
        Fn::GetAtt:
          - CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092
          - Arn
      Runtime: nodejs12.x
      Description:
        Fn::Join:
          - ""
          - - "Lambda function for auto-deleting objects in "
            - Ref: NextJsAppPublicAssets04474AF7
            - " S3 bucket."
    DependsOn:
      - CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092
    Metadata:
      aws:cdk:path: NextJsPokeStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler
  LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: NextJsPokeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource
  LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - logs:PutRetentionPolicy
              - logs:DeleteRetentionPolicy
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB
      Roles:
        - Ref: LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB
    Metadata:
      aws:cdk:path: NextJsPokeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource
  LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A:
    Type: AWS::Lambda::Function
    Properties:
      Handler: index.handler
      Runtime: nodejs14.x
      Code:
        S3Bucket:
          Ref: AssetParameters67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24S3Bucket4D46ABB5
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24S3VersionKeyB0F28861
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24S3VersionKeyB0F28861
      Role:
        Fn::GetAtt:
          - LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB
          - Arn
    DependsOn:
      - LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB
      - LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB
    Metadata:
      aws:cdk:path: NextJsPokeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: NextJsPokeStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
            Effect: Allow
            Resource:
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4S3BucketF38C2A52
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4S3BucketF38C2A52
                    - /*
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
              - s3:DeleteObject*
              - s3:PutObject*
              - s3:Abort*
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - NextJsAppPublicAssets04474AF7
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - NextJsAppPublicAssets04474AF7
                        - Arn
                    - /*
          - Action:
              - cloudfront:GetInvalidation
              - cloudfront:CreateInvalidation
            Effect: Allow
            Resource: "*"
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
            Effect: Allow
            Resource:
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897dS3BucketE901F994
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897dS3BucketE901F994
                    - /*
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
            Effect: Allow
            Resource:
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParametersae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6eS3Bucket624C14E8
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParametersae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6eS3Bucket624C14E8
                    - /*
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
            Effect: Allow
            Resource:
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7S3BucketF362E2EA
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7S3BucketF362E2EA
                    - /*
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
            Effect: Allow
            Resource:
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32S3Bucket92E07749
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32S3Bucket92E07749
                    - /*
        Version: "2012-10-17"
      PolicyName: CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF
      Roles:
        - Ref: CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
    Metadata:
      aws:cdk:path: NextJsPokeStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3Bucket55EFA30C
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3VersionKey60329B70
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3VersionKey60329B70
      Role:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
          - Arn
      Handler: index.handler
      Layers:
        - Ref: NextJsAppAssetDeploymentBuildIDAwsCliLayer8F0726F2
      Runtime: python3.6
      Timeout: 900
    DependsOn:
      - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF
      - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
    Metadata:
      aws:cdk:path: NextJsPokeStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource
      aws:asset:path: asset.c24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cf
      aws:asset:property: Code
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAAE3VSTW/CMAz9LdzTsI7LdhsrQ0JiGivS7iE1XSBNIE5AKOp/X9IAZRM75fnr2X5OTvP8mT4MXtgRM15th55rA9QvLeNbUmiF1jhuSeHQ6qYE1M5wIMVaXfEYEWzIr4WqSZ/xq2Bh9EFUYGLhghnWgAXTktjU44j6V8e3YGP0jNKz0FLwU+8+28l4ZQgtwT1S/+nAdUN1oCWSNauKUT91iluhVQxd8dsBlF12Y72z3S5OHcJ3vF9g8Fx8gWMpGEZHAl3RTB30FoJUa9Ez/XXO2QnMhWUZ2CVYfZ2pJYI11JdaJmnj2++eUFh1lHkWxUbaaU4q2El9akI7miSZXB1BA10jneu6DFKrbnEutavWRod0XzD+DX2LW/PDiHDKEvYO8OYC99wTEb6HWLmOPiWMOQfEWRV72sQd205j2/8ybmnay/UyGSXLwhfhUtDxEQspOhVbonQFdIPDQ/5E80eaDzYoRGZcIGyAlun9AXL3x6XaAgAA
    Metadata:
      aws:cdk:path: NextJsPokeStack/CDKMetadata/Default
Parameters:
  AssetParameters4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392S3BucketBF7A7F3F:
    Type: String
    Description: S3 bucket for asset "4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392"
  AssetParameters4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392S3VersionKeyFAF93626:
    Type: String
    Description: S3 key for asset version "4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392"
  AssetParameters4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392ArtifactHashE56CD69A:
    Type: String
    Description: Artifact hash for asset "4cd61014b71160e8c66fe167e43710d5ba068b80b134e9bd84508cf9238b2392"
  AssetParameters2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78S3Bucket0F26858B:
    Type: String
    Description: S3 bucket for asset "2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78"
  AssetParameters2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78S3VersionKey51901B24:
    Type: String
    Description: S3 key for asset version "2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78"
  AssetParameters2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78ArtifactHash36C99919:
    Type: String
    Description: Artifact hash for asset "2e0722d28052ed671c0fe86d3906b59bbc3035b69e985f6daffee705c6825c78"
  AssetParametersf3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008dS3Bucket31A9F37F:
    Type: String
    Description: S3 bucket for asset "f3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008d"
  AssetParametersf3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008dS3VersionKey283DB3A2:
    Type: String
    Description: S3 key for asset version "f3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008d"
  AssetParametersf3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008dArtifactHash95317F6B:
    Type: String
    Description: Artifact hash for asset "f3f41e77410de365cf7669dd1963bbe02a50ee6028ffb5eea5a0f3bf101e008d"
  AssetParameters67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24S3Bucket4D46ABB5:
    Type: String
    Description: S3 bucket for asset "67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24"
  AssetParameters67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24S3VersionKeyB0F28861:
    Type: String
    Description: S3 key for asset version "67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24"
  AssetParameters67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24ArtifactHashBA91B77F:
    Type: String
    Description: Artifact hash for asset "67b7823b74bc135986aa72f889d6a8da058d0c4a20cbc2dfc6f78995fdd2fc24"
  AssetParameters005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616S3Bucket9790E16F:
    Type: String
    Description: S3 bucket for asset "005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616"
  AssetParameters005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616S3VersionKey48B8D4CE:
    Type: String
    Description: S3 key for asset version "005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616"
  AssetParameters005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616ArtifactHash3441AFDF:
    Type: String
    Description: Artifact hash for asset "005c405ea1e12d726fe57591e19434e0e6a50d56be445d08e3f2744452340616"
  AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3BucketAEADE8C7:
    Type: String
    Description: S3 bucket for asset "e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68"
  AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F:
    Type: String
    Description: S3 key for asset version "e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68"
  AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68ArtifactHashD9A515C3:
    Type: String
    Description: Artifact hash for asset "e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68"
  AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3Bucket55EFA30C:
    Type: String
    Description: S3 bucket for asset "c24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cf"
  AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3VersionKey60329B70:
    Type: String
    Description: S3 key for asset version "c24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cf"
  AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfArtifactHash85F58E48:
    Type: String
    Description: Artifact hash for asset "c24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cf"
  AssetParameters8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4S3BucketF38C2A52:
    Type: String
    Description: S3 bucket for asset "8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4"
  AssetParameters8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4S3VersionKeyE157C120:
    Type: String
    Description: S3 key for asset version "8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4"
  AssetParameters8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4ArtifactHash38E72A7C:
    Type: String
    Description: Artifact hash for asset "8b8d89024131647b0d9d10c626e9c966e65b4e088d3e22d4fdafc1ed4cad5bd4"
  AssetParameters586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897dS3BucketE901F994:
    Type: String
    Description: S3 bucket for asset "586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897d"
  AssetParameters586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897dS3VersionKeyA90F4FD0:
    Type: String
    Description: S3 key for asset version "586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897d"
  AssetParameters586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897dArtifactHashD152D388:
    Type: String
    Description: Artifact hash for asset "586408823edec95af77fd2d39784b1eb7de842f08c92473523ec25c1bde7897d"
  AssetParametersae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6eS3Bucket624C14E8:
    Type: String
    Description: S3 bucket for asset "ae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6e"
  AssetParametersae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6eS3VersionKey61154E89:
    Type: String
    Description: S3 key for asset version "ae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6e"
  AssetParametersae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6eArtifactHash1228D6F6:
    Type: String
    Description: Artifact hash for asset "ae7abf2a7ccdac4dfa7ccbe4143582cc1b27ae8752fd99b7a211408b60a43d6e"
  AssetParameters1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7S3BucketF362E2EA:
    Type: String
    Description: S3 bucket for asset "1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7"
  AssetParameters1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7S3VersionKey1CF20F63:
    Type: String
    Description: S3 key for asset version "1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7"
  AssetParameters1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7ArtifactHashC97B9E4D:
    Type: String
    Description: Artifact hash for asset "1f3328be2404633c866996561aa398891c1096b16e953cdbf795a367a85a53c7"
  AssetParameters1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32S3Bucket92E07749:
    Type: String
    Description: S3 bucket for asset "1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32"
  AssetParameters1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32S3VersionKey635894C8:
    Type: String
    Description: S3 key for asset version "1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32"
  AssetParameters1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32ArtifactHash1220B04A:
    Type: String
    Description: Artifact hash for asset "1013029e54e1e9de4883b205ae918b855a00fc3c00ba42c4673f7bba93d9cf32"

